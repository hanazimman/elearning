(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{1311:function(e,t,s){"use strict";const{registerMenu:n,registerEpics:i}=s(4),o=s(1435),r=s(2188);i(o("swipeMenu")),n("swipeMenu",r)},1391:function(e,t,s){"use strict";e.exports=function(e){var t;const s=e.displayTitle,n=null!==(t=e._heroImage)&&void 0!==t&&t._isEnabled?e._heroImage.title:null;return s||n}},1435:function(e,t,s){"use strict";const n=s(8),{Observable:i}=s(5),{setLocationReadyState:o,PUSH_LOCATION:r}=s(9),a=s(219),l=s(217);e.exports=e=>(t,s)=>t.filter(({type:t})=>{if(t!==r)return;const{location:n,settings:i}=s.getState();return"menu"===n.currentContentType&&i._menu===e}).switchMap(()=>{const t=s.getState(),{location:r,contentObjects:u,device:c,course:h}=t,{currentId:m}=r,d=m===h._id?h:u[m],p=n(d,["_"+e,"_heroImage"]);if(!p||!p._graphic)return i.empty();const w=a(p._graphic.src,p._graphic.srcAdvanced,!0);return w?i.concat(i.of(o(!1)),i.bindCallback(l)(w,!1).map(()=>o(!0))):i.empty()})},1500:function(e,t,s){"use strict";const n=s(2),i=s(1),o=s(0),r=s(55),a=n({displayName:"Swipeable",propTypes:{onSwipe:i.func.isRequired,threshold:i.number,allowedTime:i.number,restraint:i.number},getDefaultProps:function(){return{threshold:30,allowedTime:400,restraint:100}},getInitialState:function(){return{_startX:0,_startY:0,_startTime:0}},onTouchStart:function(e){const t=e.changedTouches[0];this.setState({_startX:t.pageX,_startY:t.pageY,_startTime:(new Date).getTime()}),e.target===r.findDOMNode(this)&&e.preventDefault()},onTouchMove:function(){},onTouchEnd:function(e){const t=e.changedTouches[0],s=t.pageX-this.state._startX,n=t.pageY-this.state._startY,i=(new Date).getTime()-this.state._startTime;let o="none";i<=this.props.allowedTime&&(Math.abs(s)>=this.props.threshold&&Math.abs(n)<=this.props.restraint?o=s<0?"left":"right":Math.abs(n)>=this.props.threshold&&Math.abs(s)<=this.props.restraint&&(o=n<0?"up":"down"));const a={direction:o,speed:{x:s/i,y:n/i},distance:{x:s,y:n},timeTaken:i};this.props.onSwipe(a),this.setState({_startX:0,_startY:0,_startTime:0}),e.target===r.findDOMNode(this)&&e.preventDefault()},render:function(){return o.createElement("div",{className:"ev-swipeable",onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd},this.props.children)}});e.exports=a},2188:function(e,t,s){"use strict";const n=s(8),i=s(28),o=s(2),r=s(1),a=s(0),l=s(1500),u=s(7),{Menu:c}=s(301),h=s(2189),m=o({displayName:"SwipeMenu",propTypes:{menu:r.object.isRequired,device:r.object.isRequired,theme:r.object.isRequired,itemIds:r.array.isRequired,location:r.object.isRequired,hasActionBar:r.bool.isRequired,course:r.object},getInitialState:()=>({currentIndex:0}),UNSAFE_componentWillReceiveProps({device:e}){const{props:t}=this;t.device.orientation!==e.orientation&&this.setState({currentIndex:0})},getMenuItemsContainerClass(){const{menu:e,device:t}=this.props;let s=e._swipeMenu._shouldShowControlsOnHover;const n=e._swipeMenu._shouldShowControlsOnBottom,i=e._swipeMenu._shouldPartiallyShowNextItem,o=e._swipeMenu._shouldDisableItemScaling;return(t.touch&&!t.isWindowsTouchScreen||n)&&(s=!1),u("ev-menu-items-container ev-clearfix",{"ev-show-controls-on-hover":s,"ev-show-controls-bottom":n,"ev-partially-show-next-item":i,"ev-should-disable-item-scaling":o})},getMenuItemsStyle(){let e="auto";const t=this.props.menu._swipeMenu;return t._shouldShowControlsOnBottom?e="auto":!t._shouldShowControlsOnBottom&&t._shouldShowControlsOnHover?e=this.props.device.touch&&!this.props.device.isWindowsTouchScreen?"0 34px":"auto":t._shouldShowControlsOnBottom||t._shouldShowControlsOnHover||(e="0 34px"),{margin:e,overflow:this.props.menu._swipeMenu._shouldAlwaysShowItems?"visible":"hidden"}},getMenuItemsInnerStyle(e){const{device:t,menu:s}=this.props,{currentIndex:n}=this.state,i=this.getItemsVisible(),{_shouldPartiallyShowNextItem:o,_shouldShowControlsOnHover:r,_shouldShowControlsOnBottom:a}=s._swipeMenu;let l=100/i*n;if(o&&(!r||!a))switch(t.screenSize){case"medium":l=46*n;break;case"small":l=90*n;break;default:l=31*n}return{transform:`translate3d(${e?l+"%":`-${l}%`}, 0, 0)`}},getItemsVisible(){const{device:e}=this.props;let t;switch(e.screenSize){case"medium":t=2;break;case"small":t=1;break;default:t=3}return this.props.itemIds.length<t&&(t=this.props.itemIds.length),t},getShouldAlwaysShowContent(){const{course:e}=this.props;return e._swipeMenu&&!0===e._swipeMenu._shouldDisableDetailOnHover},showItemContent(e){this.setState({_itemSelectedId:e})},onLeftClicked(e){e.preventDefault(),e.stopPropagation(),this.setState({currentIndex:this.state.currentIndex-1,_itemSelectedId:null})},onRightClicked(e){e.preventDefault(),e.stopPropagation(),this.setState({currentIndex:this.state.currentIndex+1,_itemSelectedId:null})},onMenuItemsSwipe(e){"left"!==e.direction?"right"===e.direction&&this.onSwipeRight():this.onSwipeLeft()},onSwipeLeft(){this.state.currentIndex<this.props.itemIds.length-this.getItemsVisible()&&this.setState({currentIndex:this.state.currentIndex+1})},onSwipeRight(){this.state.currentIndex>0&&this.setState({currentIndex:this.state.currentIndex-1})},renderLeftControl(e){const t=0===this.state.currentIndex;if(t&&this.props.menu._swipeMenu._shouldHideDisabledControl)return;const s=u("ev-menu-controls",{"ev-menu-controls-left":!e,"ev-menu-controls-right":e,"ev-is-bottom":this.props.menu._swipeMenu._shouldShowControlsOnBottom}),n=u("ev-button ev-primary ev-menu-control ev-menu-control-left",{"ev-is-active":!t});return a.createElement("div",{className:s},a.createElement("button",{className:n,onClick:this.onLeftClicked,disabled:t,"aria-label":this.props.menu._swipeMenu.prevButtonAriaLabel},a.createElement("i",{className:u("ev-icon",{"ev-icon-arrow-left":!e,"ev-icon-arrow-right":e})})))},renderRightControl(e){const t=this.state.currentIndex===this.props.itemIds.length-this.getItemsVisible();if(t&&this.props.menu._swipeMenu._shouldHideDisabledControl)return;const s=u("ev-menu-controls",{"ev-menu-controls-right":!e,"ev-menu-controls-left":e,"ev-is-bottom":this.props.menu._swipeMenu._shouldShowControlsOnBottom}),n=u("ev-button ev-primary ev-menu-control ev-menu-control-right",{"ev-is-active":!t,"ev-is-bottom":this.props.menu._swipeMenu._shouldShowControlsOnBottom});return a.createElement("div",{className:s},a.createElement("button",{className:n,onClick:this.onRightClicked,disabled:t,"aria-label":this.props.menu._swipeMenu.nextButtonAriaLabel},a.createElement("i",{className:u("ev-icon",{"ev-icon-arrow-right":!e,"ev-icon-arrow-left":e})})))},getShouldShowProgressBars(){const{props:e}=this,t=n(e.theme,"_menu._settings._shouldShowProgressBarsOnMenus","content"),s=n(e.menu,"_swipeMenu._shouldShowProgressBarsOnMenus",!0);return"content"===t?s:"true"===t},renderItems(){const{props:e}=this,t=n(e.menu,"_swipeMenu._shouldShowIconOnMenuItems",!1),s=n(e.theme,"_menu._settings._durationIcon",null);return i(e.itemIds,(n,i)=>{const o=i>=this.state.currentIndex&&i<this.state.currentIndex+this.getItemsVisible(),r=n===this.state._itemSelectedId;return a.createElement(h,{key:n,itemId:n,showItemContent:this.showItemContent,isContentVisible:r,isVisibleItem:o,shouldShowProgressBarsOnMenus:this.getShouldShowProgressBars(),shouldShowIconOnMenuItems:t,shouldAlwaysShowContent:this.getShouldAlwaysShowContent(),shouldAlwaysShowItems:e.menu._swipeMenu._shouldAlwaysShowItems,durationIcon:s,device:e.device})})},render(){const{props:e}=this,t=n(e.course,"_isRTL",!1);return a.createElement(c,{className:"ev-swipe-menu",menu:e.menu,menuSettings:e.menu._swipeMenu,device:e.device,theme:e.theme,location:e.location,hasActionBar:e.hasActionBar},a.createElement("div",{className:this.getMenuItemsContainerClass()},this.renderLeftControl(t),a.createElement(l,{onSwipe:this.onMenuItemsSwipe},a.createElement("div",{className:"ev-menu-items",ref:"menuItems",style:this.getMenuItemsStyle()},a.createElement("div",{className:"ev-menu-items-inner",style:this.getMenuItemsInnerStyle(t)},this.renderItems()))),this.renderRightControl(t)))}});e.exports=m},2189:function(e,t,s){"use strict";const n=s(8),i=s(2),o=s(0),r=s(7),a=s(1391),l=s(478),u=s(168),c=s(219),h=s(62),m=s(76),d=s(30),{MenuItemProgress:p,MenuItemDuration:w,MenuItemHOC:v,MenuItemLink:I}=s(301),g=s(63),_=i({displayName:"SwipeMenuItem",showItemContent(){this.props.showItemContent(this.props.item._id)},onLinkPressed(e){e.stopPropagation()},getStyle(){var e,t;const{width:s,height:n,item:i,isContentVisible:o}=this.props,r={width:s+"px",height:n+"px"},a=null===(e=i._swipeMenu)||void 0===e?void 0:e._graphic,l=null===(t=i._swipeMenu)||void 0===t?void 0:t._hoverGraphic;return u(a)&&(r.backgroundImage=`url(${c(a.src,a.srcAdvanced,!0)})`),o&&u(l)&&(r.backgroundImage=`url(${c(l.src,l.srcAdvanced,!0)})`),r},getItemClass(){const e=n(this.props.device,"browser.name");return r("ev-menu-item ev-collection-item ev-menu-item-"+this.props.item._id,{"ev-is-visible-item":!!this.props.shouldAlwaysShowItems||this.props.isVisibleItem,"ev-is-content-visible":this.props.isContentVisible,"ev-static-content":this.props.shouldAlwaysShowContent,"ev-supports-scaling":"ie"!==e})},renderTitle(){const e=a(this.props.item);if(e)return o.createElement(m,{id:this.props.item._id+"-title",headingElement:"h2",displayTitle:e,className:"ev-menu-item-title",innerClassName:"ev-menu-item-title-inner"})},renderBody(){if(this.props.item.description)return o.createElement(d,{body:this.props.item.description,className:"ev-menu-item-body",innerClassName:"ev-menu-item-body-inner"})},renderDuration(){if(this.props.item.duration)return o.createElement(w,{duration:this.props.item.duration,durationIcon:this.props.durationIcon,durationLabel:this.props.item.durationLabel})},renderProgress(){const{props:e}=this;if(e.shouldShowProgressBarsOnMenus)return o.createElement(p,{item:e.item,pageMenuItemsCompletedCount:e.pageMenuItemsCompletedCount,pageMenuItemsCount:e.pageMenuItemsCount,completedChildrenAsPercentage:e.completedChildrenAsPercentage})},renderLink(){const{item:e}=this.props;return o.createElement(I,{isLocked:e._isLocked,isVisited:e._isVisited,linkText:e.linkText,linkIcon:e.linkIcon,isLinkIconRightPosition:e.isLinkIconRightPosition,link:`/${e._type}/${e._id}`,onClick:this.onLinkPressed,onTouchMove:this.onLinkPressed,onTouchStart:this.onLinkPressed,onTouchEnd:this.onLinkPressed})},renderElements(e){return h("menuItem",e,{item:this.props.item})},render(){return o.createElement(g,{id:this.props.item._id,name:"menu item",className:this.getItemClass(),style:this.getStyle(),onMouseOver:this.showItemContent,onMouseOut:this.showItemContent,onTouchStart:this.showItemContent},this.renderElements("root"),l(this.props.item,"menuitem"),o.createElement("div",{className:"ev-menu-item-inner ev-collection-item-inner"},o.createElement("div",{className:"ev-collection-item-content"},o.createElement("div",{className:"ev-collection-item-content-inner ev-clearfix"},this.renderTitle(),o.createElement("div",{className:"ev-menu-item-hidden-content"},this.renderBody(),this.renderDuration(),this.renderElements("content"),this.renderProgress(),this.renderLink())))))}});e.exports=v(_)}}]);