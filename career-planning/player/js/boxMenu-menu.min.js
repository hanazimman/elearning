(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1306:function(e,t,n){"use strict";const{registerMenu:i,registerEpics:s}=n(4),o=n(1435),r=n(2168);s(o("boxMenu")),i("boxMenu",r)},1391:function(e,t,n){"use strict";e.exports=function(e){var t;const n=e.displayTitle,i=null!==(t=e._heroImage)&&void 0!==t&&t._isEnabled?e._heroImage.title:null;return n||i}},1433:function(e,t,n){"use strict";const i=n(2),s=n(0),o=n(1),{Trail:r,config:m,interpolate:a}=n(75),l=i({displayName:"AnimatableItems",propTypes:{startAnimation:o.bool.isRequired,animations:o.object,renderItem:o.func.isRequired,maxAnimatable:o.number,items:o.array.isRequired},getDefaultProps:()=>({region:!1,startAnimation:!1,animations:{_slideInX:{_isEnabled:!1,_from:0},_slideInY:{_isEnabled:!1,_from:0},_fadeIn:{_isEnabled:!1,_from:0},_scaleIn:{_isEnabled:!1,_from:0},easing:"default"},ariaHidden:!1}),getSpringFrom(){const{animations:e}=this.props,{_slideInX:t,_slideInY:n,_fadeIn:i,_scaleIn:s}=e;return{x:t&&t._isEnabled?t._isReverseDirection?-t._from:t._from:0,y:n&&n._isEnabled?n._isReverseDirection?-n._from:n._from:0,opacity:i&&i._isEnabled?i._from/100:1,scale:s&&s._isEnabled?s._from/100:1}},getSpringTo(){const{startAnimation:e}=this.props;return e?{opacity:1,x:0,y:0,scale:1}:this.getSpringFrom()},getInterpolatedStyle:({opacity:e,x:t,y:n,scale:i})=>({opacity:e,transform:a([t,n,i],(e,t,n)=>`translate3d(${e}%, ${t}%, 0) scale(${n})`)}),renderAnimatedItems(){const{items:e,animations:t,renderItem:n,maxAnimatable:i}=this.props;let o=e;return"number"==typeof i&&(o=e.slice(0,i)),s.createElement(r,{native:!0,key:o.length,from:this.getSpringFrom(),to:this.getSpringTo(),config:m[t._easing]||m.default,keys:o.map((e,t)=>"string"==typeof e?e:t),items:o},(e,t)=>i=>n({item:e,style:this.getInterpolatedStyle(i),isAnimated:!0},t))},renderNonAnimatedItems(){const{items:e,renderItem:t,maxAnimatable:n}=this.props;if("number"==typeof n)return e.slice(n).map((e,i)=>t({item:e,style:null,isAnimated:!1},i+n))},render(){return s.createElement(s.Fragment,null,this.renderAnimatedItems(),this.renderNonAnimatedItems())}});e.exports=l},1435:function(e,t,n){"use strict";const i=n(8),{Observable:s}=n(5),{setLocationReadyState:o,PUSH_LOCATION:r}=n(9),m=n(219),a=n(217);e.exports=e=>(t,n)=>t.filter(({type:t})=>{if(t!==r)return;const{location:i,settings:s}=n.getState();return"menu"===i.currentContentType&&s._menu===e}).switchMap(()=>{const t=n.getState(),{location:r,contentObjects:l,device:c,course:u}=t,{currentId:d}=r,p=d===u._id?u:l[d],h=i(p,["_"+e,"_heroImage"]);if(!h||!h._graphic)return s.empty();const _=m(h._graphic.src,h._graphic.srcAdvanced,!0);return _?s.concat(s.of(o(!1)),s.bindCallback(a)(_,!1).map(()=>o(!0))):s.empty()})},2168:function(e,t,n){"use strict";const i=n(8),s=n(2),o=n(1),r=n(0),{Menu:m}=n(301),{animated:a}=n(75),l=n(218),c=n(1433),u=n(2169),d=s({displayName:"BoxMenu",propTypes:{menu:o.object.isRequired,device:o.object.isRequired,theme:o.object.isRequired,itemIds:o.array.isRequired,hasActionBar:o.bool.isRequired,location:o.object.isRequired},getInitialState:()=>({_isMounted:!1,_isItemsVisible:!1}),componentDidMount(){this._timeout=setTimeout(this.setMounted,200)},componentWillUnmount(){this._timeout&&clearTimeout(this._timeout)},setMounted(){this.setState({_isMounted:!0})},onVisibilityChange(e){const{_isItemsVisible:t}=this.state;!t&&e&&this.setState({_isItemsVisible:!0})},getMenuItemsClassName(){const{props:e}=this,{screenSize:t}=e.device;let n=1;switch(t){case"small":n=this.props.menu._boxMenu._itemsPerRowSmall||1;break;case"medium":n=this.props.menu._boxMenu._itemsPerRowMedium||2;break;case"large":n=this.props.menu._boxMenu._itemsPerRowLarge||2;break;default:n=1}return"ev-menu-items ev-menu-items-layout-"+n},getShouldShowProgressBars(){const{props:e}=this,t=i(e.theme,"_menu._settings._shouldShowProgressBarsOnMenus","content"),n=i(e.menu,"_boxMenu._shouldShowProgressBarsOnMenus",!0);return"content"===t?n:"true"===t},renderMenuItemsInner(){var e,t,n,s;const{props:o,state:m}=this,l=i(o.menu,"_boxMenu._showCompletionStatusOnMenus",!1),d=null===(e=o.menu._boxMenu)||void 0===e?void 0:e.itemCompletionText,p=i(o.menu,"_boxMenu._shouldShowIconOnMenuItems",!1),h=null===(t=o.theme._menu)||void 0===t||null===(n=t._settings)||void 0===n?void 0:n._durationIcon,_=i(o.menu,"_boxMenu._showCompletionStatusInFooter",!1),I=i(o.menu,"_boxMenu._isVerticalItemLayout",!1),b=null===(s=o.theme._menu)||void 0===s?void 0:s._itemAnimations;return r.createElement("div",{className:"ev-menu-items-inner",role:"list"},r.createElement(c,{items:o.itemIds,startAnimation:m._isItemsVisible,animations:b,maxAnimatable:8,renderItem:({item:e,isAnimated:t,style:n})=>r.createElement(u,{key:e,itemId:e,style:n,element:t?a.div:"div",shouldShowProgressBarsOnMenus:this.getShouldShowProgressBars(),shouldShowIconOnMenuItems:p,showCompletionStatusOnMenus:l,showCompletionStatusInFooter:_,itemCompletionText:d,durationIcon:h,isVerticalItemLayout:I})}))},render(){const{props:e,state:t}=this;return r.createElement(m,{className:"ev-box-menu",menu:e.menu,menuSettings:e.menu._boxMenu,device:e.device,theme:e.theme,hasActionBar:e.hasActionBar,location:e.location},r.createElement("div",{className:this.getMenuItemsClassName()},r.createElement(l,{active:t._isMounted&&!t._isItemsVisible,partialVisibility:!0,scrollCheck:!0,scrollThrottle:10,intervalDelay:250,minTopValue:80,onChange:this.onVisibilityChange},this.renderMenuItemsInner())))}});e.exports=d},2169:function(e,t,n){"use strict";const i=n(2),s=n(1),o=n(0),{Link:r}=n(35),m=n(1391),{MenuItemProgress:a,MenuItemCompletion:l,MenuItemDuration:c,MenuItemLink:u,MenuItemHOC:d}=n(301),p=n(62),h=n(76),_=n(30),I=n(56),b=n(18),g=n(168),v=n(96),y=n(63),M=n(40),f=i({displayName:"BoxMenuItem",propTypes:{item:s.object.isRequired,style:s.object,element:s.any,shouldShowProgressBarsOnMenus:s.bool,shouldShowIconOnMenuItems:s.bool,durationIcon:s.string,itemCompletionText:s.string,isComplete:s.bool.isRequired,showCompletionStatusOnMenus:s.bool,showCompletionStatusInFooter:s.bool,pageMenuItemsCompletedCount:s.number,pageMenuItemsCount:s.number,completedChildrenAsPercentage:s.number.isRequired,isVerticalItemLayout:s.bool},mixins:[b],renderItemIcon(){if(!this.props.shouldShowIconOnMenuItems)return;const e="menu"===this.props.item._type?"papers":"document2";return o.createElement(I,{icon:e,className:"ev-menu-item-type-icon"})},renderTitle(){const e=m(this.props.item);if(e)return o.createElement(h,{id:this.props.item._id+"-title",headingElement:"h"+this.context,displayTitle:e,className:"ev-menu-item-title",innerClassName:"ev-menu-item-title-inner"})},renderBody(){if(this.props.item.description)return o.createElement(_,{body:this.props.item.description,className:"ev-menu-item-body",innerClassName:"ev-menu-item-body-inner"})},renderDuration(){const{duration:e,durationLabel:t}=this.props.item;if(e)return o.createElement(c,{duration:e,durationIcon:this.props.durationIcon,durationLabel:t})},renderCompletionStatus(){const{isComplete:e,showCompletionStatusOnMenus:t,showCompletionStatusInFooter:n}=this.props;if(e&&t&&!n)return o.createElement(l,{itemCompletionText:this.props.itemCompletionText})},renderProgress(){const{props:e}=this;return e.isComplete&&e.showCompletionStatusOnMenus&&e.showCompletionStatusInFooter?o.createElement(l,{itemCompletionText:e.itemCompletionText}):e.shouldShowProgressBarsOnMenus?o.createElement(a,{item:e.item,pageMenuItemsCompletedCount:e.pageMenuItemsCompletedCount,pageMenuItemsCount:e.pageMenuItemsCount,completedChildrenAsPercentage:e.completedChildrenAsPercentage}):void 0},renderLink(){const{item:e}=this.props;return o.createElement(u,{isLocked:e._isLocked,isVisited:e._isVisited,linkText:e.linkText,linkIcon:e.linkIcon,isLinkIconRightPosition:e.isLinkIconRightPosition,link:`/${e._type}/${e._id}`})},renderElements(e){return p("menuItem",e,{item:this.props.item})},renderItemGraphic(){const{item:e}=this.props;if(!e._boxMenu)return;const t=e._boxMenu,n=`/${e._type}/${e._id}`;if(!g(t))return;let i=o.createElement(v,{graphicSrc:t.src,graphicSrcAdvanced:t.srcAdvanced,autoSize:!0,tabIndex:null,altText:t.alt});return this.props.item._isLocked||(i=o.createElement(r,{className:"ev-menu-item-graphic-link",to:n},i)),o.createElement("div",{className:"ev-menu-item-graphic"},o.createElement("div",{className:"ev-menu-item-graphic-inner"},i))},renderInner(){const{isVerticalItemLayout:e}=this.props;return e?o.createElement("div",{className:"ev-menu-item-inner ev-collection-item-inner ev-box-menu-item-vertical-layout"},o.createElement("div",{className:"ev-collection-item-content-inner ev-clearfix"},this.renderTitle(),this.renderBody(),this.renderItemGraphic(),this.renderCompletionStatus(),this.renderProgress(),this.renderDuration(),this.renderElements("content"),o.createElement("div",{className:"ev-box-menu-item-vertical-layout-actions"},this.renderLink()))):o.createElement("div",{className:"ev-menu-item-inner ev-collection-item-inner"},this.renderItemGraphic(),o.createElement("div",{className:"ev-collection-item-content"},o.createElement("div",{className:"ev-collection-item-content-inner ev-clearfix"},this.renderItemIcon(),this.renderTitle(),this.renderBody(),this.renderDuration(),this.renderCompletionStatus(),this.renderElements("content"))),o.createElement("div",{className:"ev-collection-item-footer"},o.createElement("div",{className:"ev-collection-item-footer-inner ev-clearfix"},this.renderProgress(),this.renderLink())))},render(){const{element:e,item:t,style:n}=this.props;return o.createElement(y,{element:e,id:t._id,style:n,name:"menu item",role:"listitem",className:"ev-menu-item ev-collection-item ev-menu-item-"+t._id,"aria-label":t.ariaLabel},this.renderElements("root"),this.renderInner())}});f.contextType=M,e.exports=d(f)}}]);