(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{1280:function(e,t,o){"use strict";const{registerComponent:n}=o(4),i=o(2013),s=o(2014),r=o(2015),{videoMetricsChanged:p}=o(1557);n("media",{component:i,trackingMap:s,reducer:r,actions:{videoMetricsChanged:p}})},1374:function(e,t,o){"use strict";const n=o(7);e.exports=function(e){return n(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},1375:function(e,t,o){"use strict";e.exports=function(e,t,o,n,i){n&&n.props&&n.props.component?(t.top&&(n.isInviewTop=!0),t.bottom&&(n.isInviewBottom=!0),n.isInviewTop&&n.isInviewBottom&&i&&i(n.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}},1376:function(e,t,o){"use strict";e.exports=(e,t="_hasBeenViewed")=>{const{component:o,isPageReady:n}=e;return!0===n&&!0===o._isReady&&!0!==o[t]}},1557:function(e,t,o){"use strict";t.MEDIA_METRICS_CHANGED="MEDIA_METRICS_CHANGED",t.videoMetricsChanged=(e,o)=>({type:t.MEDIA_METRICS_CHANGED,payload:{componentId:e,metrics:o}})},2013:function(e,t,o){"use strict";const n=o(2),i=o(1),s=o(0),{Component:r}=o(466),p=o(1374),c=o(86),{connect:d}=o(6),l=o(77),a=o(1376),m=o(1375),u=o(303),h=n({displayName:"Media",propTypes:{component:i.object.isRequired,setComponentAsReady:i.func.isRequired,setComponentAsViewed:i.func.isRequired,setComponentAsStarted:i.func.isRequired,setComponentAsComplete:i.func.isRequired,articleStyle:i.string.isRequired,styles:i.object,videoMetricsChanged:i.func.isRequired,screenSize:i.string.isRequired,animationEnded:i.bool},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},setComponentAsComplete(){this.props.setComponentAsComplete(this.props.component._id)},setComponentAsViewed(){this.props.setComponentAsViewed(this.props.component._id)},onVideoPlay(){const{component:e}=this.props;e._hasStarted||this.props.setComponentAsStarted(e._id),e._isComplete||"play"!==e._setCompletionOn||this.setComponentAsComplete()},onVideoEnded(){const{component:e}=this.props;e._isComplete||"ended"!==e._setCompletionOn||this.setComponentAsComplete()},onTranscriptViewed(){this.props.component._isComplete||this.setComponentAsComplete()},onVisibilityChange(...e){m(...e,this,"inview"===this.props.component._setCompletionOn?this.props.setComponentAsComplete:this.props.setComponentAsViewed)},onMetricsChanged(e){const{component:t,videoMetricsChanged:o}=this.props;o(t._id,e)},getVideoSrc(){const{component:e,screenSize:t}=this.props,o=e._media;if(o){if(o._isExternalLink)return o.externalUrl;if("small"===t&&o.mobileMp4)return c(o.mobileMp4);if(o.mp4)return c(o.mp4)}},getAudioDescriptionSrc(){var e;const{component:t}=this.props;return null!==(e=t._audio)&&void 0!==e&&e._isEnabled?c(t._audio.mp3):null},getHasBigPlayButton(){const{_media:e}=this.props.component;return!(null!=e&&e._shouldHidePlayerControls||null!=e&&e._shouldHidePlayButton)},renderVideoPlayer(){var e,t,o,n,i,r,p,d,l;const{component:a}=this.props,m=this.getVideoSrc();if(m)return s.createElement(u,{id:a._id,src:m,controls:!(null!==(e=a._media)&&void 0!==e&&e._shouldHidePlayerControls),posterSrc:c(null===(t=a._media)||void 0===t?void 0:t.poster),hasBigPlayButton:this.getHasBigPlayButton(),autoPlay:null===(o=a._media)||void 0===o?void 0:o._shouldAutoPlay,loop:null===(n=a._media)||void 0===n?void 0:n._shouldLoop,metrics:a._metrics,articleStyle:this.props.articleStyle,subtitlesSrc:c(null===(i=a._subtitles)||void 0===i?void 0:i.src),subtitlesLabel:null===(r=a._subtitles)||void 0===r?void 0:r.label,transcriptType:null!==(p=a._transcript)&&void 0!==p&&p._shouldOpenTranscriptInPopup?"popup":"collapse",transcriptText:null===(d=a._transcript)||void 0===d?void 0:d.body,transcriptButtonText:null===(l=a._transcript)||void 0===l?void 0:l.button,transcriptInlineClassName:"ev-component-body",transcriptInlineInnerClassName:"ev-component-body-inner",audioDescriptionSrc:this.getAudioDescriptionSrc(),animationEnded:this.props.animationEnded,onPlay:this.onVideoPlay,onEnded:this.onVideoEnded,onTranscriptView:this.onTranscriptViewed,onMetricsChange:this.onMetricsChanged})},render(){const{props:e}=this,t=a(e,"inview"===e.component._setCompletionOn?"_isComplete":"_hasBeenViewed");return s.createElement(r,{component:e.component,styles:e.styles,onVisibilityChange:this.onVisibilityChange,isVisibilitySensorActive:t},s.createElement("div",{className:p(e.component)},this.renderVideoPlayer()))}});e.exports=d((e,t)=>({articleStyle:l(e,t.component,"article")._classes}))(h)},2014:function(e,t,o){"use strict";e.exports={_interactionType:{type:"String",default:"presentation",shouldRestore:!1},_metrics:{fieldKey:"_metrics",type:"Object",shouldRestore:!0}}},2015:function(e,t,o){"use strict";const n=o(11),{MEDIA_METRICS_CHANGED:i}=o(1557);e.exports=(e,t)=>{switch(t.type){case i:return n({},e,{_metrics:t.payload.metrics});default:return e}}}}]);