(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{1333:function(e,t,r){"use strict";const{registerReducer:s,registerEpics:i}=r(4),n=r(1380),o=r(2301),{resourcesElementsEpic:a}=r(2302);s("resources",o),i(a,n("resources"))},1380:function(e,t,r){"use strict";const s=r(8),{Observable:i}=r(5),{setLocationReadyState:n,PUSH_LOCATION:o}=r(9),a=r(219),c=r(217);e.exports=(e,t)=>(r,l)=>r.filter(({type:t})=>{if(t!==o)return;const{navigationStatus:r,path:s}=l.getState().location;return"plugin"===r&&s[0]===e}).switchMap(()=>{const r=l.getState(),{device:o,course:u}=r;let m;if(m=t?t(r):s(u,["_"+e,"_heroImage"]),!m||!m._graphic)return i.empty();const d=a(m._graphic.src,m._graphic.srcAdvanced,!0);return d?i.concat(i.of(n(!1)),i.bindCallback(c)(d,!1).map(()=>n(!0))):i.empty()})},1383:function(e,t,r){"use strict";const s=r(8),{store:i}=r(4);e.exports=function(e,t,r){const{course:n,theme:o}=i.getState(),a=n[e],c=s(a,t),l=s(o,["_extensions",e,"_settings",t]);return c||l||r}},1611:function(e,t,r){"use strict";t.RESOURCES_FILTER_CHANGED="RESOURCES_FILTER_CHANGED",t.resourcesFilterChanged=e=>({type:t.RESOURCES_FILTER_CHANGED,payload:e})},1612:function(e,t,r){"use strict";e.exports={ALL:"all",DOCUMENT:"document",LINK:"link"}},2301:function(e,t,r){"use strict";const s=r(28),{SETUP_APP:i}=r(9),{RESOURCES_FILTER_CHANGED:n}=r(1611),o=r(1612),a={filterType:o.ALL};function c(e,t){return s(e,e=>t===o.ALL||e._type===t?{...e,_isVisible:!0}:{...e,_isVisible:!1})}e.exports=(e=a,t)=>{if(t.type===i){const e=t.payload.course._resources;return e&&e._isEnabled?{...a,...e,_resourcesItems:c(e._resourcesItems,a.filterType)}:a}if(!e._isEnabled)return a;switch(t.type){case n:return{...e,filterType:t.payload,_resourcesItems:c(e._resourcesItems,t.payload)};default:return e}}},2302:function(e,t,r){"use strict";var s=r(5);const i=r(8),{SETUP_APP:n}=r(9),{addElement:o}=r(42),{NavigationSideItem:a}=r(475),c=r(1383),l=r(2303);t.resourcesElementsEpic=(e,t)=>e.filter(e=>{var r;return e.type===n&&(null===(r=t.getState().course._resources)||void 0===r?void 0:r._isEnabled)}).mergeMap(()=>{const e=t.getState().course._resources,r=[o({parent:"router",name:"resources",path:"/resources",exact:!0,component:l,getShouldPersist:e=>i(e,"course._resources._isEnabled",!1)})];return e._shouldDisableNavigationSideItem||r.push(o({parent:"navigationSide",name:"resources",component:a,props:{link:"/resources",icon:c("_resources","_navigationIcon","box"),label:e.title}})),s.Observable.of(...r)})},2303:function(e,t,r){"use strict";const s=r(31),i=r(28),n=r(12),o=r(2),a=r(1),c=r(0),{connect:l}=r(6),u=r(7),{ContentContainer:m,HeroImage:d}=r(301),p=r(172),h=r(30),v=r(76),_=r(467),E=r(40),{resourcesFilterChanged:g}=r(1611),y=r(1612),f=r(2304),b=o({displayName:"Resources",propTypes:{theme:a.object.isRequired,isReady:a.bool.isRequired,resources:a.object.isRequired,resourcesFilterChanged:a.func.isRequired},onFilterChange(e){this.props.resourcesFilterChanged(e.target.value)},getResourceTypes(){const e=[];return n(this.props.resources._resourcesItems,({_type:t})=>{e.includes(t)||e.push(t)}),e},renderTitle(){if(this.props.resources.title)return c.createElement(v,{headingElement:"h"+this.context,displayTitle:this.props.resources.title,className:"ev-header-title",innerClassName:"ev-header-title-inner"})},renderDescription(){if(this.props.resources.description)return c.createElement(h,{className:"ev-header-body",innerClassName:"ev-header-body-inner",body:this.props.resources.description})},renderFilter(){const{resources:e}=this.props,t=this.getResourceTypes();if(t.length<=1)return null;t.unshift(y.ALL);const r=i(t,t=>c.createElement("option",{key:t,value:t},e._filterButtons[t]));return c.createElement("div",{className:"ev-resources-filter ev-action-bar"},c.createElement("div",{className:"ev-resources-filter-inner ev-action-bar-inner"},c.createElement("select",{value:e.filterType,onChange:this.onFilterChange,"aria-label":e.filterAriaLabel},r)))},renderItems(){const{resources:e}=this.props,t=s(e._resourcesItems,{_isVisible:!0});return i(t,e=>c.createElement(f,{key:e._id,item:e}))},renderContent(){if(this.props.resources._resourcesItems)return c.createElement(_,null,c.createElement("ul",{className:"ev-list-items"},this.renderItems()))},renderHeroImage(){const{_heroImage:e}=this.props.resources;if(null!=e&&e._isEnabled)return c.createElement(E.Provider,{value:this.props.resources.title?this.context+1:this.context},c.createElement(d,{title:e.title,body:e.body,graphic:e._graphic,_contentWidth:e._contentWidth,layout:e.layout,floatingGraphic:e._floatingGraphic,parentSelector:".ev-extension-hero-container",theme:this.props.theme,isReady:this.props.isReady}))},render(){var e,t,r,s;const{resources:i,theme:n,isReady:o}=this.props,a=i._headerIcon,l=null===(e=n._extensions._resources)||void 0===e||null===(t=e._settings)||void 0===t?void 0:t._headerIcon,d=a||l,h=i.title||null!==(r=i._heroImage)&&void 0!==r&&r._isEnabled&&null!==(s=i._heroImage)&&void 0!==s&&s.title?this.context+1:this.context;return c.createElement(m,{region:"resources",className:"ev-extension ev-resources",ariaLabel:i.ariaLabel},c.createElement("div",{className:"ev-extension-inner"},o?null:c.createElement(p,null),c.createElement("div",{className:"ev-extension-hero-container"},this.renderHeroImage()),c.createElement("div",{className:u("ev-header",{"ev-header-with-action-bar":this.getResourceTypes().length>1})},c.createElement("div",{className:u("ev-header-inner ev-clearfix",{"ev-no-graphic":!d})},c.createElement("div",{className:"ev-header-left"},this.renderTitle(),this.renderDescription()),d&&c.createElement("div",{className:"ev-header-right"},c.createElement("i",{className:"ev-icon ev-icon-"+d})))),this.renderFilter(),c.createElement(E.Provider,{value:h},this.renderContent())))}});b.contextType=E,e.exports=l(e=>({resources:e.resources,theme:e.theme,isReady:e.location.isLocationReady}),{resourcesFilterChanged:g})(b)},2304:function(e,t,r){"use strict";const s=r(1),i=r(0),n=r(86),o=r(30),a=r(76),c=r(40),l=({item:e})=>{const t=i.useContext(c);return i.createElement("li",{className:"ev-resources-item ev-list-item"},i.createElement("div",{className:"ev-resources-item ev-list-item-inner"},i.createElement("div",{className:"ev-list-item-left"},i.createElement(a,{headingElement:"h"+t,displayTitle:e.title,className:"ev-resources-item-title ev-list-item-title",innerClassName:"ev-resources-item-title-inner ev-list-item-title-inner"}),i.createElement(o,{className:"ev-resources-item-description",innerClassName:"ev-resources-item-description-inner",body:e.description})),i.createElement("div",{className:"ev-list-item-right"},(()=>{const t=e.view||"View",r=e._asset?n(e._asset):e._link;return i.createElement("a",{className:"ev-resources-item-open ev-button ev-primary",target:"_blank",href:r,rel:"noreferrer"},t)})())))};l.propTypes={item:s.shape({title:s.string,description:s.string,view:s.string,_asset:s.object,_link:s.string}).isRequired},e.exports=l}}]);