(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{1258:function(t,e,n){"use strict";const{registerComponent:i}=n(4),o=n(1847),{dialogItemDisplayed:s,dialogIncrementIndex:r,dialogShowDialog:a}=n(1531);i("dialog",{component:o,actions:{dialogItemDisplayed:s,dialogIncrementIndex:r,dialogShowDialog:a},reducer:n(1850),trackingMap:n(1851),mapStateToProps:({app:t})=>({isLivePreview:t.isLivePreview})})},1374:function(t,e,n){"use strict";const i=n(7);t.exports=function(t){return i(`ev-${t._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!t._isEnabled,"ev-complete ev-show-user-answer":t._isComplete&&!t._isEnabled,"ev-correct":t._isCorrect&&!t._isEnabled,"ev-submitted":t._isSubmitted})}},1381:function(t,e,n){var i=n(88),o=n(48);t.exports=function(t){return"number"==typeof t||o(t)&&"[object Number]"==i(t)}},1531:function(t,e,n){"use strict";e.DIALOG_ITEM_DISPLAYED="DIALOG_ITEM_DISPLAYED",e.DIALOG_INCREMENT_INDEX="DIALOG_INCREMENT_INDEX",e.DIALOG_SHOW_DIALOG="DIALOG_SHOW_DIALOG",e.dialogItemDisplayed=(t,n)=>({type:e.DIALOG_ITEM_DISPLAYED,payload:{componentId:t,itemId:n}}),e.dialogShowDialog=t=>({type:e.DIALOG_SHOW_DIALOG,payload:{componentId:t}}),e.dialogIncrementIndex=(t,n)=>({type:e.DIALOG_INCREMENT_INDEX,payload:{componentId:t,currentItemIndex:n}})},1847:function(t,e,n){"use strict";const i=n(31),o=n(180),s=n(17),r=n(28),a=n(1381),l=n(2),c=n(1),p=n(0),{Component:d}=n(466),m=n(1374),u=n(86),h=n(215),g=n(1848),_=n(1849),I=l({displayName:"Dialog",propTypes:{component:c.object.isRequired,setComponentAsReady:c.func.isRequired,setComponentAsViewed:c.func.isRequired,setComponentAsStarted:c.func.isRequired,setComponentAsComplete:c.func.isRequired,setFocusOnAriaLabel:c.func.isRequired,dialogItemDisplayed:c.func.isRequired,dialogIncrementIndex:c.func.isRequired,dialogShowDialog:c.func.isRequired,isLivePreview:c.bool.isRequired,isPageReady:c.bool,screenSize:c.string.isRequired,theme:c.object,styles:c.object},getInitialState:function(){return{_canScrollOnEnter:!0}},componentDidMount:function(){const{props:t}=this;t.setComponentAsReady(t.component._id)},UNSAFE_componentWillReceiveProps:function({component:t}){if(t._isComplete)return;i(t._items,t=>t._hasDisplayed).length===t._items.length&&this.props.setComponentAsComplete(t._id)},componentWillUnmount:function(){this.removeScrollEventListener()},addScrollEventListener:function(){this._scrollYPosition=window.scrollY,window.addEventListener("scroll",this.onWindowScroll)},removeScrollEventListener:function(){window.removeEventListener("scroll",this.onWindowScroll)},setDialogItemAsDisplayed:function(t){const{props:e}=this;e.dialogItemDisplayed(e.component._id,t._id)},startDialog:function(){const{props:t}=this;t.component._hasStarted||t.setComponentAsStarted(t.component._id),t.dialogShowDialog(t.component._id)},startDialogInView:function(){const{component:t}=this.props,e=t._inviewStartDelay||0;this.addScrollEventListener(),this._startTimer=setTimeout(()=>{this.startDialog()},e)},onWindowScroll:o((function(){const t=window.scrollY;t<this._scrollYPosition?(this.removeScrollEventListener(),this.setState({_canScrollOnEnter:!1})):this._scrollYPosition=t}),100),onVisibilityChanged:function(t,{top:e,bottom:n}){const{props:i}=this;e&&(this.isInviewTop=!0),n&&(this.isInviewBottom=!0),this.isInviewTop&&this.isInviewBottom&&(i.component._hasBeenViewed||i.setComponentAsViewed(i.component._id),i.component._isStartDialogInView&&this.startDialogInView())},onNextItem:function(){const{component:t,dialogIncrementIndex:e}=this.props,n=this.getNextItemIndex(t.currentItemIndex);n?e(t._id,n):this.removeScrollEventListener()},onStartClicked:function(){this.addScrollEventListener(),this.startDialog(),this.props.setFocusOnAriaLabel()},onNextClick:function(){this.onNextItem()},getIsVisibilitySensorActive:function(){const{component:t,isPageReady:e,isLivePreview:n}=this.props;return!!n||!0===e&&!0===t._isReady&&(!0===t._isStartDialogInView&&void 0===this._startTimer||!t._hasBeenViewed)},getItemPerson:function(t){const{component:e}=this.props;return s(e._people,{_id:t._personId})},getNextItemIndex:function(t){const{component:e}=this.props,n=e._items,i=t+1;if(i===n.length)return;const o=n[i];return this.getItemPerson(o)?i:(this.setDialogItemAsDisplayed(o),this.getNextItemIndex(i))},getStyle:function(){const{props:t}=this,e={},{screenSize:n}=t,i="small"===n?"_mobileBackgroundImage":"_backgroundImage",o=t.component[i];return o&&o.src&&(e.backgroundImage=`url(${u(o.src)})`,e.backgroundPosition=o._position,e.backgroundSize=o._size,e.backgroundRepeat="no-repeat"),e},renderDialogStart:function(){const{props:t}=this;if(!t.component.showDialog)return p.createElement(g,{component:t.component,onStartClicked:this.onStartClicked,people:t.component._people,dialogStartButtonText:t.component.dialogStartButtonText,swatches:t.theme._swatches})},renderItems(){const{props:t,state:e}=this,n=t.component._items,i=t.component._dialogItemsContainerWidth,o=e._canScrollOnEnter&&!t.component._shouldDisableProgessionAnimation;if(!t.component.showDialog)return;const s=r(n,(e,n)=>{const i=this.getItemPerson(e);return i?p.createElement(_,{key:e._id,person:i,isCurrentItem:n===t.component.currentItemIndex,onNextItem:this.onNextItem,component:this.props.component,dialogItemAvatarWidth:this.props.component._dialogItemAvatarWidth,shouldShowPersonNameOnItem:this.props.component._shouldShowPersonNameOnItem,item:e,canScrollOnEnter:o,onItemDisplayed:this.setDialogItemAsDisplayed,animations:this.props.component._animations,swatches:t.theme._swatches,useNextButton:!t.component._isStartDialogInView&&t.component._useNextButton}):null}),l={};return a(i)&&(l.width=i+"%"),p.createElement("ul",{className:"ev-dialog-items",style:l,"aria-live":"assertive"},s)},renderNextButton:function(){const{component:t}=this.props;if(!t._isStartDialogInView&&t.showDialog&&t._useNextButton&&t.currentItemIndex<t._items.length-1)return p.createElement("div",{className:"ev-dialog-next-button-container",style:{textAlign:t._nextButtonAlignment}},p.createElement(h,{text:t.nextButtonText,icon:t._nextButtonIcon,iconSize:t._nextButtonIconSize,iconPosition:t._nextButtonIconPosition,showPulseAnimation:t._nextButtonShowPulseAnimation&&0===t.currentItemIndex,"aria-label":t.nextButtonAriaLabel,onClick:this.onNextClick}))},render:function(){const{props:t}=this;return p.createElement(d,{component:t.component,styles:t.styles,isVisibilitySensorActive:this.getIsVisibilitySensorActive(),onVisibilityChange:this.onVisibilityChanged},p.createElement("div",{className:m(t.component),style:this.getStyle()},this.renderDialogStart(),this.renderItems(),this.renderNextButton()))}});t.exports=I},1848:function(t,e,n){"use strict";const i=n(28),o=n(2),s=n(1),r=n(0),{Motion:a,spring:l}=n(1408),c=n(140),p=n(96),d=o({displayName:"DialogStart",getInitialState:function(){return{_y:0,_opacity:1}},propTypes:{component:s.object.isRequired,onStartClicked:s.func.isRequired,people:s.array.isRequired,dialogStartButtonText:s.string.isRequired,swatches:s.object},getStyle:function(t){return{transform:`translate3d(0, ${t.y}%, 0)`,opacity:t.opacity}},getAvatarImgStyle:function(){return{width:this.props.component._dialogStartAvatarWidth}},getAvatarStyle:function(t){const e=c(t._dialogBackgroundColor,this.props.swatches),n={};return e&&"transparent"!==e&&(n.backgroundColor=e),n},getTextStyle:function(t){const e=c(t._dialogTextColor,this.props.swatches),n={};return e&&"transparent"!==e&&(n.color=e),n},onStartClicked:function(t){t.preventDefault(),this.setState({_y:-20,_opacity:0,_startClicked:!0}),setTimeout(()=>{this.props.onStartClicked()},300)},renderStartButton:function(){if(!this.state._startClicked&&!this.props.component._isStartDialogInView)return r.createElement("button",{className:"ev-dialog-start-button ev-button ev-primary",onClick:this.onStartClicked},this.props.dialogStartButtonText)},renderPeople:function(){return i(this.props.people,t=>r.createElement("div",{className:"ev-dialog-start-avatar",key:t._id,style:this.getAvatarStyle(t)},r.createElement(p,{graphicSrc:t.avatar,altText:t.name,style:this.getAvatarImgStyle(),autoSize:!1}),r.createElement("div",{className:"ev-dialog-start-name",style:this.getTextStyle(t)},t.name)))},renderContent:function(t){return r.createElement("div",{className:"ev-dialog-start-avatars",style:this.getStyle(t)},this.renderPeople())},render:function(){return r.createElement("div",{className:"ev-dialog-start"},r.createElement(a,{defaultStyle:{y:0,opacity:1},style:{y:l(this.state._y),opacity:l(this.state._opacity)}},this.renderContent),r.createElement("div",{className:"ev-dialog-start-action"},this.renderStartButton()))}});t.exports=d},1849:function(t,e,n){"use strict";(function(e){const i=n(1381),o=n(302),s=n(8),r=n(2),a=n(18),l=n(1),c=n(0),p=n(55),d=n(7),m=n(89),u=n(96),h=n(140),g=n(30),_=r({displayName:"DialogItem",propTypes:{person:l.object.isRequired,item:l.object.isRequired,onNextItem:l.func.isRequired,canScrollOnEnter:l.bool.isRequired,onItemDisplayed:l.func.isRequired,animations:l.object,useNextButton:l.bool.isRequired,isCurrentItem:l.bool,dialogItemAvatarWidth:l.string,swatches:l.object,shouldShowPersonNameOnItem:l.bool},mixins:[a],getDefaultProps:function(){return{useNextButton:!1}},componentDidMount:function(){this.props.isCurrentItem&&this.displayItem()},UNSAFE_componentWillReceiveProps:function(t){this.props.item._isVisible||!t.isCurrentItem||this._hasStartedToDisplay||this.displayItem()},componentDidUpdate:function(t){!t.item._isVisible&&this.props.item._isVisible&&this.scrollToItem()},displayItem:function(){this._hasStartedToDisplay=!0,this.props.useNextButton||setTimeout(()=>{this.props.onNextItem()},this.props.item._delay),this.props.onItemDisplayed(this.props.item)},scrollToItem:function(){const t=p.findDOMNode(this);if(t){const n=e(t),i=e(window),o=i.scrollTop();if(this.props.canScrollOnEnter&&n.offset().top+n.height()>o+i.height()){const n=o+t.offsetHeight+100;e("html, body").animate({scrollTop:n},1e3)}}},getAvatarStyle:function(){return{width:this.props.dialogItemAvatarWidth}},getItemInnerStyle:function(){const{person:t}=this.props,e=this.props.item._dialogItemWidth,n=h(t._dialogBackgroundColor,this.props.swatches),o={};return n&&"transparent"!==n&&(o.backgroundColor=n),i(e)&&(o.width=e+"%"),o},getTextStyle:function(){const{person:t}=this.props,e=h(t._dialogTextColor,this.props.swatches),n={};return e&&"transparent"!==e&&(n.color=e),n},getAnimations:function(){const{item:t,animations:e}=this.props;let n=o({},e);if(e||(n={_slideInX:{_isEnabled:!0,_from:100},_fadeIn:{_isEnabled:!0,_from:0},_easing:"slow"}),n._slideInX._isEnabled){const e=t._isOnRightSide,i=n._slideInX._from;return o({},n,{_slideInX:o({},n._slideInX,{_from:e?i:-i})})}return n},renderPersonName:function(){if(this.props.shouldShowPersonNameOnItem)return c.createElement("div",{className:"ev-dialog-item-name",style:this.getTextStyle()},this.props.person.name)},render:function(){const t=this.getAnimations(),e=s(t,"_fadeIn._isEnabled",!1),n=s(t,"_scaleIn._isEnabled",!1);return this.props.item._isVisible||e||n?this.props.useNextButton&&!this.props.item._isVisible?null:c.createElement(m,{className:d("ev-dialog-item",{"ev-dialog-item-right-item":this.props.item._isOnRightSide,"ev-dialog-item-current-item":this.props.isCurrentItem}),tag:"li",animations:t,startAnimation:this.props.item._isVisible},c.createElement("div",{className:"ev-dialog-item-inner",style:this.getItemInnerStyle()},c.createElement("div",{className:"ev-dialog-item-avatar"},c.createElement(u,{graphicSrc:this.props.person.avatar,altText:this.props.person.name,style:this.getAvatarStyle(),autoSize:!1}),this.renderPersonName()),c.createElement(g,{className:"ev-dialog-item-message",style:this.getTextStyle(),body:this.props.item.body}))):null}});t.exports=_}).call(this,n(27))},1850:function(t,e,n){"use strict";const i=n(300),o=n(11),s=n(28),{SETUP_COMPONENT:r}=n(61),{DIALOG_ITEM_DISPLAYED:a,DIALOG_INCREMENT_INDEX:l,DIALOG_SHOW_DIALOG:c}=n(1531);t.exports=(t,e)=>{switch(e.type){case r:return o({},t,{showDialog:!1,currentItemIndex:0,_items:s(t._items,t=>o({},t,{_isVisible:!1}))});case c:return o({},t,{showDialog:!0});case a:return function(t,e){const{itemId:n}=t.payload,s=i(e._items,t=>t._id===n),r=o({},e._items[s],{_hasDisplayed:!0,_isVisible:!0}),a=[...e._items.slice(0,s),r,...e._items.slice(s+1)];return o({},e,{_items:a})}(e,t);case l:return o({},t,{currentItemIndex:e.payload.currentItemIndex});default:return t}}},1851:function(t,e,n){"use strict";t.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String"},_hasDisplayed:{fieldKey:"_hasDisplayed",type:"Boolean",shouldRestore:!0}}}}}}]);