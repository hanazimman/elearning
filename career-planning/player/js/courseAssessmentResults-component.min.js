(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{1257:function(e,s,t){"use strict";const{registerComponent:n,registerEpics:o}=t(4),r=t(1844),i=t(1845),{assessmentCompletedEpic:c}=t(1846);o(c),n("courseAssessmentResults",{component:r,trackingMap:i})},1374:function(e,s,t){"use strict";const n=t(7);e.exports=function(e){return n(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},1375:function(e,s,t){"use strict";e.exports=function(e,s,t,n,o){n&&n.props&&n.props.component?(s.top&&(n.isInviewTop=!0),s.bottom&&(n.isInviewBottom=!0),n.isInviewTop&&n.isInviewBottom&&o&&o(n.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}},1376:function(e,s,t){"use strict";e.exports=(e,s="_hasBeenViewed")=>{const{component:t,isPageReady:n}=e;return!0===n&&!0===t._isReady&&!0!==t[s]}},1427:function(e,s,t){"use strict";const n=t(11),o=t(43),{createSelector:r}=t(54),i=e=>e.courseAssessment;s.courseAssessmentSelector=r([e=>e.course._courseAssessment,i],(e={},s={})=>n({},e,s)),s.courseAssessmentComponentsSelector=r([i,e=>e.components],(e,s)=>e?o(s,e.componentIds):{}),s.courseAssessmentStatusSelector=r(i,e=>e._isComplete?e._isPassed?"pass":"fail":"incomplete")},1442:function(e,s,t){"use strict";const n=t(8),o=t(12),r=t(175),i=t(31),c=t(142),a=t(2),l=t(0),m=t(1),p=t(7),{connect:u}=t(6),d=t(30),v=t(76),h=t(29),C=t(40),w=t(467),b=t(1482),E=a({displayName:"CourseAssessmentResultsOverview",propTypes:{components:m.object.isRequired,completedComponentsCount:m.number,isComponentOverview:m.bool,isFullScreenOpen:m.bool,_isComplete:m.bool.isRequired,_isPassed:m.bool.isRequired,_showScoreAsPercentage:m.bool,_showQuestionsCompleted:m.bool,_showQuestionsCorrect:m.bool,_showAttemptsTaken:m.bool,incompleteFeedback:m.string,scoreText:m.string.isRequired,score:m.number.isRequired,resultsOverviewTitle:m.string.isRequired,progressDescription:m.string.isRequired,resultsQuestionsCorrect:m.string.isRequired,resultsViewAverageAttemptsTakenText:m.string.isRequired},getDefaultProps:()=>({_showScoreAsPercentage:!0,_showQuestionsCompleted:!0,_showQuestionsCorrect:!0,_showAttemptsTaken:!0}),getFeedback(){const{props:e}=this;return e._isComplete?n(e,["_feedback",e._isPassed?"passed":"failed"]):e.incompleteFeedback},getAverageAttempts(){const{props:e}=this;let s=0;o(e.components,e=>{if(!e._isComplete)return;const{_attempts:t,_attemptsLeft:n}=e,o=t-n;s+=r(o)?o:1});return Math.round(s/e.completedComponentsCount*100)/100||"N/A"},getCorrectComponentsCount(){return i(this.props.components,{_isComplete:!0,_isCorrect:!0}).length},renderScore(e){const{props:s}=this;if(!s._isComplete)return;const t=p("ev-icon ev-info-detail-display",{"ev-icon-cross":!s._isPassed,"ev-icon-check":s._isPassed}),n=s.score+(s._showScoreAsPercentage?"%":"");return e?l.createElement("div",{className:"ev-course-assessment-results-component-overview-results"},l.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},l.createElement("div",{className:"ev-info-detail"},l.createElement("div",{className:t})),l.createElement("div",{className:"ev-label"},l.createElement(h,{element:"span",html:s.scoreText}),"Â ",l.createElement("b",null,n)))):l.createElement("div",{className:"ev-info-detail"},l.createElement("div",{className:t}),l.createElement("div",{className:"ev-info-detail-label"},l.createElement(h,{element:"span",html:s.scoreText}),"Â ",l.createElement("b",null,n)))},renderResultsDetail(e){const{_showQuestionsCompleted:s,_showQuestionsCorrect:t,_showAttemptsTaken:n}=this.props;if(s||t||n)return e?l.createElement("div",{className:"ev-course-assessment-results-component-overview-results"},this.renderQuestionsCompleted(!0),this.renderQuestionsCorrect(!0),this.renderAttempts(!0)):l.createElement("div",{className:"ev-content-row ev-course-assessment-results-roundup"},l.createElement("div",{className:"ev-content-row-inner ev-clearfix"},this.renderQuestionsCompleted(),this.renderQuestionsCorrect(),this.renderAttempts()))},renderQuestionsCompleted(e){const{props:s}=this;if(s._showQuestionsCompleted)return e?l.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},l.createElement(b,{key:s.completedComponentsCount,componentsCount:c(s.components),completedComponentsCount:s.completedComponentsCount}),l.createElement(h,{className:"ev-label",html:s.progressDescription})):l.createElement("div",{className:"ev-course-assessment-results-progress ev-course-assessment-results-roundup-col"},l.createElement(b,{key:s.isFullScreenOpen,componentsCount:c(s.components),completedComponentsCount:s.completedComponentsCount}),l.createElement(h,{className:"ev-course-assessment-results-progress-text ev-info-graph-label",html:s.progressDescription}))},renderQuestionsCorrect(e){const{props:s}=this;if(!s._showQuestionsCorrect)return;const t=`${this.getCorrectComponentsCount()} / ${c(s.components)}`;return e?l.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},l.createElement("div",{className:"ev-info-detail"},l.createElement("div",{className:"ev-info-detail-display"},t)),l.createElement(h,{className:"ev-label",html:s.resultsQuestionsCorrect})):l.createElement("div",{className:"ev-course-assessment-results-questions ev-course-assessment-results-roundup-col"},l.createElement("div",{className:"ev-course-assessment-results-questions-inner ev-info-detail"},l.createElement("div",{className:"ev-course-assessment-results-question-result ev-info-detail-display"},t),l.createElement(h,{className:"ev-course-assessment-results-question-text ev-info-detail-label",html:s.resultsQuestionsCorrect})))},renderAttempts(e){const{props:s}=this;if(s._showAttemptsTaken)return e?l.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},l.createElement("div",{className:"ev-info-detail"},l.createElement("div",{className:"ev-info-detail-display"},this.getAverageAttempts())),l.createElement(h,{className:"ev-label",html:s.resultsViewAverageAttemptsTakenText})):l.createElement("div",{className:"ev-course-assessment-results-attempts ev-course-assessment-results-roundup-col"},l.createElement("div",{className:"ev-course-assessment-results-attempts-inner ev-info-detail"},l.createElement("div",{className:"ev-course-assessment-results-attempts-result ev-info-detail-display"},this.getAverageAttempts()),l.createElement(h,{className:"ev-course-assessment-results-attempts-text ev-info-detail-label",html:s.resultsViewAverageAttemptsTakenText})))},renderComponentOverview(){const{props:e}=this;return l.createElement("div",{className:"ev-course-assessment-results-component-overview"},l.createElement(v,{headingElement:"h"+(this.context+1),displayTitle:e.resultsOverviewTitle,className:"ev-component-title",innerClassName:"ev-component-title-inner"}),this.renderScore(!0),l.createElement(d,{className:"ev-component-body",innerClassName:"ev-component-body-inner",body:this.getFeedback()}),this.renderResultsDetail(!0))},render(){const{props:e}=this;return e.isComponentOverview?this.renderComponentOverview():l.createElement(w,{className:"ev-course-assessment-results-overview"},l.createElement(v,{headingElement:"h"+this.context,displayTitle:e.resultsOverviewTitle,className:"ev-component-title",innerClassName:"ev-component-title-inner"}),l.createElement("div",{className:"ev-content-row"},l.createElement("div",{className:"ev-content-row-inner"},this.renderScore(),l.createElement(d,{className:"ev-course-assessment-results-overview-status-feedback  ev-content-body",innerClassName:"ev-course-assessment-results-overview-status-feedback-inner ev-content-body-inner",body:this.getFeedback()}))),this.renderResultsDetail())}});E.contextType=C,e.exports=u(({fullScreen:e})=>({isFullScreenOpen:e.isOpen}))(E)},1443:function(e,s,t){"use strict";const n=t(0),o=t(1),r=t(215),i=t(76),c=t(40),a=t(467),l=e=>{const s=n.useContext(c),t=s=>{s.preventDefault(),e.onRetakeAssessment()},o=()=>{const{retakeAttemptsPrefixText:s,retakeAttemptsTaken:t,_retakeAttempts:n,_allowUnlimitedRetakeAttempts:o}=e.courseAssessment;return o?`${s}: ${t}`:`${s}: ${t}/${n}`},l=()=>{const{retakeAttemptsTaken:s,_retakeAttempts:o,retakeAssessmentButtonText:i,_allowUnlimitedRetakeAttempts:c,_shouldHideRetakeOnAssessmentPassed:a,_isPassed:l}=e.courseAssessment;if(!(e.hideRetakeButton||a&&l)&&(s!==o||c))return n.createElement("div",{className:"ev-course-assessment-results-overview-reset"},n.createElement("div",{className:"ev-course-assessment-results-overview-reset-inner"},n.createElement(r,{onClick:t,variant:"warning",text:i})))};return e.isComponentRetake?n.createElement("div",{className:"ev-course-assessment-results-component-overview-retake"},n.createElement("div",{className:"ev-label"},o()),l()):n.createElement(a,null,n.createElement(i,{headingElement:"h"+s,displayTitle:o(),className:"ev-component-title",innerClassName:"ev-component-title-inner"}),l())};l.propTypes={courseAssessment:o.object.isRequired,onRetakeAssessment:o.func,hideRetakeButton:o.bool,isComponentRetake:o.bool},e.exports=n.memo(l)},1482:function(e,s,t){"use strict";const n=t(2),o=t(1),r=t(0),i=t(55),{connect:c}=t(6),a=t(140),l=t(1483),m=n({displayName:"CourseAssessmentProgressCircle",propTypes:{variables:o.object.isRequired,componentsCount:o.number.isRequired,completedComponentsCount:o.number.isRequired,swatches:o.object},getDefaultProps:()=>({completedComponentsCount:0}),componentDidMount(){const e=i.findDOMNode(this),{variables:s,componentsCount:t,completedComponentsCount:n,swatches:o}=this.props,r=a(s["@chart-background-color"],o),c=a(s["@chart-highlight-color"],o),m=a(s["@chart-text-color"],o),p=Math.round(n/t*100)+"%";l(e,80,80,n,t,p,18,38,38,4,4,r,c,m)},render:()=>r.createElement("div",{className:"ev-course-assessment-results-stats-progress-canvas"})});e.exports=c(e=>({variables:e.theme._chart._variables,swatches:e.theme._swatches}))(m)},1483:function(e,s,t){"use strict";const n=t(1409);e.exports=function(e,s,t,o,r,i,c,a,l,m,p,u,d,v){const h=n(e,s,t);h.customAttributes.arc=function(e,s,t,n,o){const r=360/n*t,i=(90-r)*Math.PI/180,c=e+o*Math.cos(i),a=s-o*Math.sin(i);return{path:n===t?[["M",e,s-o],["A",o,o,0,1,1,e-.01,s-o]]:[["M",e,s-o],["A",o,o,0,+(r>180),1,c,a]]}},h.text(s/2,t/2,i).attr({"font-size":c,fill:v,"font-weight":"bold"}),h.circle(s/2,t/2,l).attr({stroke:u,"stroke-width":p}),h.path().attr({stroke:d,"stroke-width":m,arc:[s/2,t/2,0,r,a]}).rotate(0,0,0).animate({arc:[s/2,t/2,o,r,a]},1900)}},1844:function(e,s,t){"use strict";(function(s){var n=t(24)(t(32));const o=t(216),r=t(2),i=t(1),c=t(0),a=t(55),{connect:l}=t(6),{Component:m}=t(466),p=t(1374),u=t(1376),d=t(1375),v=t(29),h=t(40),{courseAssessmentSelector:C,courseAssessmentComponentsSelector:w}=t(1427),b=t(1442),E=t(1443),{showConfirmResetDialog:f}=t(476),A=r({displayName:"CourseAssessmentResults",propTypes:{component:i.object.isRequired,components:i.object.isRequired,courseAssessment:i.object,setComponentAsReady:i.func.isRequired,setComponentAsViewed:i.func.isRequired,setComponentAsStarted:i.func.isRequired,setComponentAsComplete:i.func.isRequired,styles:i.object,showConfirmResetDialog:i.func},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},UNSAFE_componentWillReceiveProps({courseAssessment:e}){const{props:t}=this;t.component._scrollIntoViewOnComplete&&!t.courseAssessment._isComplete&&e._isComplete&&o(()=>{const e=a.findDOMNode(this);s(e).scrollintoview({duration:600,direction:"vertical"})},300)},onVisibilityChange(...e){d(...e,this,this.props.setComponentAsStarted)},renderIncompleteFeedback(){const{component:e,courseAssessment:s}=this.props;if(!e._showIncompleteFeedback||s._isComplete)return;const t=e.displayTitle?this.context+1:this.context;return c.createElement("div",{className:"ev-course-assessment-results-incomplete-feedback"},c.createElement("div",{className:"ev-component-title"},c.createElement(v,{element:"h"+t,className:"ev-component-title-inner",html:s.resultsOverviewTitle})),c.createElement("div",{className:"ev-component-body"},c.createElement(v,{className:"ev-component-body-inner",html:s.incompleteFeedback})))},renderOverview(){const{component:e,courseAssessment:s,components:t}=this.props;if(!e._showIncompleteFeedback||s._isComplete)return c.createElement(b,(0,n.default)({},s,{components:t,isComponentOverview:!0}))},renderRetake(){const{component:e,courseAssessment:s,showConfirmResetDialog:t}=this.props;if((!e._showIncompleteFeedback||s._isComplete)&&(e._alwaysShowRetakeButton||s._isComplete)&&s._canBeRetaken)return c.createElement(E,{courseAssessment:s,onRetakeAssessment:t,hideRetakeButton:!1,isComponentRetake:!0})},renderResults(){return this.props.courseAssessment._isEnabled?c.createElement("div",{className:"ev-course-assessment-results-component-overview-container"},this.renderIncompleteFeedback(),this.renderOverview(),this.renderRetake()):c.createElement("h4",null,"The Course Assessment Results Component requires the Course Assessment extension to be enabled.")},render(){const{props:e}=this;return c.createElement(m,{component:e.component,styles:e.styles,isVisibilitySensorActive:u(e),onVisibilityChange:this.onVisibilityChange},c.createElement("div",{className:p(e.component)},this.renderResults()))}});A.contextType=h,e.exports=l(e=>({courseAssessment:C(e),components:w(e)}),{showConfirmResetDialog:f})(A)}).call(this,t(27))},1845:function(e,s,t){"use strict";e.exports={_interactionType:{type:"String",default:"presentation",shouldRestore:!1}}},1846:function(e,s,t){"use strict";const n=t(34),{Observable:o}=t(5),{setComponentAsComplete:r}=t(61);s.assessmentCompletedEpic=(e,s)=>e.ofType("COURSE_ASSESSMENT_COMPLETE").mergeMap(()=>{const{components:e}=s.getState(),t=n(e).filter(e=>"courseAssessmentResults"===e._component).map(e=>r(e._id)).value();return o.of(...t)})}}]);