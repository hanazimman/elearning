(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{1302:function(e,t,n){"use strict";const{registerComponent:o}=n(4),i=n(2153),r=n(2155),{textInputValueChanged:s}=n(1595);o("textInput",{component:i,actions:{textInputValueChanged:s},reducer:r,trackingMap:n(2156)})},1374:function(e,t,n){"use strict";const o=n(7);e.exports=function(e){return o(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},1375:function(e,t,n){"use strict";e.exports=function(e,t,n,o,i){o&&o.props&&o.props.component?(t.top&&(o.isInviewTop=!0),t.bottom&&(o.isInviewBottom=!0),o.isInviewTop&&o.isInviewBottom&&i&&i(o.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}},1376:function(e,t,n){"use strict";e.exports=(e,t="_hasBeenViewed")=>{const{component:n,isPageReady:o}=e;return!0===o&&!0===n._isReady&&!0!==n[t]}},1379:function(e,t,n){"use strict";const{store:o}=n(4),i=n(168);function r(e,t,n){const r=e._feedback[n],s=i(r);if(t&&!s){return o.getState().course._globals._feedbackText[n]}return s?r:null}function s(e,t){const n=e._feedbackNavigation;if(n&&n[t]&&n[t]._isEnabled&&n[t]._linkType)return{_link:n[t]}}e.exports=function(e){let t;return t=e._isCorrect?function(e){const t=e._feedback._shouldUseGlobalCorrectFeedback;return{feedbackMessage:(t?o.getState().course._globals._feedbackText.correctFeedback:"")+(e._feedback.correct?e._feedback.correct:""),feedbackGraphic:r(e,t,"_correctGraphic"),feedbackNavigation:s(e,"_correct")}}(e):e._isPartlyCorrect?function(e){const{_partlyCorrect:t}=e._feedback,n=t._shouldUseGlobalPartlyCorrectFeedback,i=o.getState().course._globals._feedbackText;if(0===e._attemptsLeft){return{feedbackMessage:(n?i.partlyCorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:r(e,n,"_partlyCorrectFinalGraphic"),feedbackNavigation:s(e,"_partlyCorrect")}}return{feedbackMessage:(n?i.partlyCorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:r(e,n,"_partlyCorrectNotFinalGraphic"),feedbackNavigation:s(e,"_partlyCorrectNotFinal")}}(e):function(e){const{_incorrect:t}=e._feedback,n=t._shouldUseGlobalIncorrectFeedback,i=o.getState().course._globals._feedbackText;if(0===e._attemptsLeft||!t.notFinal&&!n||!i.incorrectNotFinalFeedback&&n){return{feedbackMessage:(n?i.incorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:r(e,n,"_incorrectFinalGraphic"),feedbackNavigation:s(e,0===e._attemptsLeft?"_incorrect":"_incorrectNotFinal")}}return{feedbackMessage:(n?i.incorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:r(e,n,"_incorrectNotFinalGraphic"),feedbackNavigation:s(e,"_incorrectNotFinal")}}(e),!1!==e._shouldShowDisplayTitleInFeedback&&(t.feedbackTitle=e.displayTitle),t}},1381:function(e,t,n){var o=n(88),i=n(48);e.exports=function(e){return"number"==typeof e||i(e)&&"[object Number]"==o(e)}},1394:function(e,t,n){var o=n(1381);e.exports=function(e){return o(e)&&e!=+e}},1434:function(e,t,n){"use strict";const o=n(1394),i=n(2),r=n(1),s=n(0),c=n(7),a=i({displayName:"Input",propTypes:{type:r.oneOf(["text","number"]),value:r.oneOfType([r.string,r.number]),onChange:r.func.isRequired,onFocus:r.func,onBlur:r.func,className:r.string,placeholder:r.string,min:r.number,max:r.number,ariaLabel:r.string,isDisabled:r.bool,shouldFocus:r.bool},getDefaultProps:()=>({type:"text"}),onChange(e){const{type:t,min:n,max:i,onChange:r}=this.props;let{value:s}=e.target;if("number"===t){if(s=parseInt(s,10),!o(s)&&(s<n||s>i))return;o(s)&&(s="")}r(s)},componentDidUpdate(e){const{shouldFocus:t}=this.props;t&&!e.shouldFocus&&this._input.focus()},render(){const{className:e,type:t,value:n,onFocus:o,onBlur:i,placeholder:r,min:a,max:u,ariaLabel:l,isDisabled:p}=this.props;return s.createElement("input",{ref:e=>this._input=e,className:c("ev-input ev-input-text",e),type:t,value:n,onChange:this.onChange,onFocus:o,onBlur:i,placeholder:r,min:a,max:u,disabled:p,"aria-label":l})}});e.exports=a},1595:function(e,t,n){"use strict";t.TEXT_INPUT_VALUE_CHANGED="TEXT_INPUT_VALUE_CHANGED",t.textInputValueChanged=(e,n,o)=>({type:t.TEXT_INPUT_VALUE_CHANGED,payload:{componentId:e,itemId:n,value:o}})},2153:function(e,t,n){"use strict";const o=n(28),i=n(2),r=n(1),s=n(0),c=n(7),{Component:a}=n(466),u=n(1379),l=n(1374),p=n(1376),d=n(1375),m=n(2154),_=i({displayName:"TextInput",propTypes:{component:r.object.isRequired,actionButtonClicked:r.func.isRequired,setComponentAsReady:r.func.isRequired,setComponentAsViewed:r.func.isRequired,setComponentAsStarted:r.func.isRequired,showFeedback:r.func.isRequired,textInputValueChanged:r.func.isRequired,shouldHideMarking:r.bool,styles:r.object,theme:r.object.isRequired},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},componentDidUpdate(e){const{component:t}=this.props;!e.component._isSubmitted&&t._isSubmitted&&this.showFeedback()},showFeedback(e){const t=u(this.props.component),n=e&&this.props.component._isComplete?{refocusSelector:".ev-buttons-feedback"}:{};this.props.showFeedback(t,n)},onTextInputValueChange(e,t){const{props:n}=this;n.component._hasStarted||n.setComponentAsStarted(n.component._id),n.textInputValueChanged(n.component._id,e,t)},onVisibilityChange(...e){d(...e,this,this.props.setComponentAsViewed)},getWidgetClassName(){const{component:e}=this.props;return c(l(e),{"ev-disabled":!e._isEnabled,"ev-correct":e._isComplete&&e._isCorrect,"ev-complete":e._isComplete,"ev-submitted":e._isSubmitted})},renderItems(){const{component:e,theme:t,shouldHideMarking:n}=this.props,i=e[e._selectedAnswerState];return o(i,o=>s.createElement(m,{key:o._id,item:o,component:e,onChange:this.onTextInputValueChange,swatches:t._swatches,shouldHideMarking:n}))},render(){const{props:e}=this;return s.createElement(a,{component:e.component,styles:e.styles,shouldHideMarking:e.shouldHideMarking,isVisibilitySensorActive:p(e),onVisibilityChange:this.onVisibilityChange,onActionButtonClicked:e.actionButtonClicked,onFeedbackButtonClicked:()=>this.showFeedback(!0)},s.createElement("div",{className:this.getWidgetClassName()},this.renderItems()))}});e.exports=_},2154:function(e,t,n){"use strict";const o=n(2),i=n(1),r=n(0),s=n(7),c=n(140),a=n(56),u=n(1434),l=n(29),p=o({displayName:"TextInputItem",propTypes:{item:i.object.isRequired,component:i.object.isRequired,onChange:i.func.isRequired,shouldHideMarking:i.bool,swatches:i.object},getClassName(){const{component:e,item:t}=this.props;return s("ev-textinput-item ev-component-item ev-component-item-color ev-component-item-border ev-clearfix",{"ev-correct":t._isCorrect&&!e._isEnabled,"ev-incorrect":!t._isCorrect&&!e._isEnabled,"ev-display-component-item":e._displayAsComponentItem})},getPrefixSuffixStyle(){const{component:e,swatches:t}=this.props,n={},o=c(e._itemTextColor,t);return o&&"transparent"!==o&&(n.color=o),n},renderPrefix(){if(this.props.item.prefix)return r.createElement(l,{element:"span",className:"ev-textinput-item-prefix ev-component-item-text-color",html:this.props.item.prefix,style:this.getPrefixSuffixStyle()})},renderSuffix(){if(this.props.item.suffix)return r.createElement(l,{element:"span",className:"ev-textinput-item-suffix ev-component-item-text-color",html:this.props.item.suffix,style:this.getPrefixSuffixStyle()})},renderMarkingIcon(){const{component:e,item:t,shouldHideMarking:n}=this.props;if(!e._isEnabled&&e._isComplete&&!n)return r.createElement(a,{icon:t._isCorrect?"check":"cross"})},render(){const{props:e}=this;return r.createElement("div",{className:this.getClassName()},r.createElement("div",{className:"ev-textinput-item-inner"},this.renderPrefix(),r.createElement("div",{className:"ev-textinput-item-input-container"},r.createElement(u,{className:"ev-textinput-item-input",value:e.item.value||"",ariaLabel:e.item.inputAriaLabel,placeholder:e.component.placeholder,isDisabled:!e.component._isEnabled,onChange:t=>e.onChange(e.item._id,t)}),r.createElement("div",{className:"ev-textinput-item-state"},this.renderMarkingIcon())),this.renderSuffix()))}});e.exports=p},2155:function(e,t,n){"use strict";const o=n(28),{SETUP_COMPONENT:i,SETUP_ANSWER_STATE:r,RESET_QUESTION:s,SUBMIT_QUESTION:c,SHOW_CORRECT_ANSWER:a,HIDE_CORRECT_ANSWER:u}=n(61),{TEXT_INPUT_VALUE_CHANGED:l}=n(1595);function p(e){const t=e._shouldNotResetAnswers||!1,n=o(e._items,e=>({...e,value:t?e.value:void 0,_isCorrect:void 0}));return{...e,_items:n,_canSubmit:!1}}function d(e){return e=(e=(e=e.toLowerCase()).replace(/[.,-/#!$Â£%^&*;:{}=\-_`~()]/g,"")).trim()}function m(e){return{...e,_selectedAnswerState:"_correctAnswer"}}e.exports=function(e,t){switch(t.type){case i:return function(e){if(!e._isComplete)return p(e);if(e._isComplete&&!e._hasUserAnswered)return e._isCorrect?m(e):function(e){return{...e,_selectedAnswerState:"_incorrectAnswer"}}(e);return e}(e);case r:return function(e){return e._correctAnswer=o(e._items,e=>({...e,_isCorrect:!0,value:e._answers[0]})),e}(e);case l:return function(e,t){let n=!0;const i=o(e._items,e=>(e._id===t.payload.itemId&&(e={...e,value:t.payload.value}),e.value||(n=!1),e));return{...e,_items:i,_canSubmit:n}}(e,t);case c:return function(e){if(!e._canSubmit)return e;let t=0,n=!1,i=!1;const r=o(e._items,i=>{let{value:r}=i,s=i._answers;!1===e._shouldBeMarkedStrictly&&(r=d(r),s=o(s,e=>d(e)));const c=s.includes(r);return c&&(t++,n=!0),{...i,_isCorrect:c}});t===r.length&&(i=!0);return{...e,_isCorrect:i,_isPartlyCorrect:!i&&n,_items:r,_hasUserAnswered:!0}}(e);case s:return p(e);case a:return m(e);case u:return function(e){return{...e,_selectedAnswerState:"_items"}}(e);default:return e}}},2156:function(e,t,n){"use strict";e.exports={_interactionType:{type:"String",default:"question",shouldRestore:!1},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String"},_isCorrect:{fieldKey:"_isCorrect",type:"Boolean",shouldRestore:!0},value:{fieldKey:"value",type:"String",shouldRestore:!0}}},_hasUserAnswered:{fieldKey:"_hasUserAnswered",type:"Boolean",shouldRestore:!0},_attemptsLeft:{fieldKey:"_attemptsLeft",type:"Number",shouldRestore:!0},_attemptsTaken:{fieldKey:"_attemptsTaken",type:"Number",shouldRestore:!0}}}}]);