(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{1276:function(e,t,s){"use strict";const{registerComponent:n}=s(4),i=s(1994),r=s(1997),{saveUserAnswer:o}=s(1555);n("linkedOpenInput",{component:i,actions:{saveUserAnswer:o},reducer:r,mapStateToProps:s(1998),trackingMap:s(1999)})},1374:function(e,t,s){"use strict";const n=s(7);e.exports=function(e){return n(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},1375:function(e,t,s){"use strict";e.exports=function(e,t,s,n,i){n&&n.props&&n.props.component?(t.top&&(n.isInviewTop=!0),t.bottom&&(n.isInviewBottom=!0),n.isInviewTop&&n.isInviewBottom&&i&&i(n.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}},1376:function(e,t,s){"use strict";e.exports=(e,t="_hasBeenViewed")=>{const{component:s,isPageReady:n}=e;return!0===n&&!0===s._isReady&&!0!==s[t]}},1407:function(e,t,s){"use strict";const n=s(2),i=s(1),r=s(0),o=s(7),a=n({displayName:"TextArea",propTypes:{id:i.string,value:i.string.isRequired,label:i.string,onChange:i.func.isRequired,onFocus:i.func,onBlur:i.func,className:i.string,placeholder:i.string,minHeight:i.number,ariaLabel:i.string,isDisabled:i.bool,shouldFocus:i.bool},getDefaultProps:()=>({value:""}),componentDidUpdate(e){const{shouldFocus:t}=this.props;t&&!e.shouldFocus&&this._textArea.focus()},renderTextArea(){const{props:e}=this;return r.createElement("textarea",{id:e.id,ref:e=>this._textArea=e,"aria-label":e.ariaLabel,value:e.value,onChange:t=>e.onChange(t.target.value),onFocus:e.onFocus,onBlur:e.onBlur,placeholder:e.placeholder,className:o("ev-text-area",e.className),style:{minHeight:e.minHeight},disabled:e.isDisabled})},render(){const{props:e}=this;return e.label?r.createElement(r.Fragment,null,r.createElement("label",{className:"ev-label",htmlFor:e.id,dangerouslySetInnerHTML:{__html:e.label},style:{pointerEvents:e.isDisabled?"none":"all"}}),this.renderTextArea()):this.renderTextArea()}});e.exports=a},1555:function(e,t,s){"use strict";t.LINKEDOPENINPUT_SAVE_USER_ANSWER="LINKEDOPENINPUT_SAVE_USER_ANSWER",t.saveUserAnswer=e=>({type:t.LINKEDOPENINPUT_SAVE_USER_ANSWER,payload:e})},1994:function(e,t,s){"use strict";var n=s(24)(s(32));const i=s(216),r=s(28),o=s(2),a=s(1),p=s(0),l=s(7),{Component:c}=s(466),d=s(215),u=s(1407),m=s(472),h=s(1374),v=s(1376),_=s(1375),A=s(140),k=s(1995),w=s(1996),b=o({displayName:"LinkedOpenInput",propTypes:{component:a.object.isRequired,setComponentAsReady:a.func.isRequired,setComponentAsViewed:a.func.isRequired,setComponentAsComplete:a.func.isRequired,showFeedback:a.func.isRequired,saveUserAnswer:a.func.isRequired,setAriaLive:a.func.isRequired,isLinkedOpenInputsComplete:a.bool,theme:a.object.isRequired,styles:a.object},getInitialState(){return{_userAnswer:this.props.component._userAnswer||"",_showSavedModal:!1}},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},componentDidUpdate(e){const{component:t}=this.props;!e.component._isSubmitted&&t._isSubmitted&&(t._userAnswer&&this.showFeedback(),this.showSavedModal())},saveUserAnswer(e){const{props:t}=this;t.saveUserAnswer({componentId:t.component._id,userAnswer:e}),t.component._isSubmitted&&(e&&this.showFeedback(),this.showSavedModal())},showFeedback(){const{component:e}=this.props;if(!e._canShowFeedback)return;const t={feedbackTitle:e._shouldShowDisplayTitleInFeedback?e.displayTitle:null,feedbackMessage:e.feedbackMessage,feedbackGraphic:e.feedbackGraphic};this.props.showFeedback(t)},showSavedModal(){this.setState({_showSavedModal:!0}),i(()=>{this.setState({_showSavedModal:!1})},1e3)},onTextAreaChange(e){this.setState({_userAnswer:e})},onSaveClicked(){const{component:e,setAriaLive:t,setComponentAsComplete:s}=this.props;this.saveUserAnswer(this.state._userAnswer),t({message:e.savedAriaLiveMessage,isAssertive:!0}),s(e._id,{_isSubmitted:!0})},onClearClicked(){this.setState({_userAnswer:""},()=>this.saveUserAnswer(""));const{component:e,setAriaLive:t}=this.props;t({message:e.clearedAriaLiveMessage,isAssertive:!0})},onVisibilityChange(...e){_(...e,this,this.props.setComponentAsViewed)},getTextAreaMinHeight(){return this.props.component._hasMinimumHeight?this.props.component._minimumHeight:300},getLinkedUserAnswerStyle(){const{component:e,theme:t}=this.props,s={},n=e._linkedOpenInputAnswerBackgroundColor,i=e._linkedOpenInputAnswerTextColor;return n&&"transparent"!==n&&(s.backgroundColor=A(n,t._swatches)),i&&"transparent"!==i&&(s.color=A(i,t._swatches)),s},renderIncomplete(){if(!this.props.isLinkedOpenInputsComplete)return p.createElement("div",{className:"ev-linkedOpenInput-linked-incomplete"},r(this.props.component._items,e=>p.createElement(w,(0,n.default)({key:e._id},e))))},renderOpenInputAnswers(){const{component:e}=this.props,t=this.getLinkedUserAnswerStyle();return r(e._items,e=>p.createElement(k,(0,n.default)({key:e._id,style:t},e)))},renderTextArea(){if(this.props.isLinkedOpenInputsComplete)return p.createElement(u,{ariaLabel:this.props.component.textAreaAriaLabel,value:this.state._userAnswer,onChange:this.onTextAreaChange,placeholder:this.props.component.placeholder,minHeight:this.getTextAreaMinHeight()})},getIsSaveDisabled(){const{component:e}=this.props,{_userAnswer:t}=this.state;return""===t&&!e._userAnswer||t===e._userAnswer},renderButtons(){if(!this.props.isLinkedOpenInputsComplete)return;const{_isActionButtonOnRight:e}=m(this.props);return p.createElement("div",{className:l("ev-buttons",{"ev-switch-buttons":e})},p.createElement(d,{className:"ev-button-save",text:this.props.component._saveButton,isDisabled:this.getIsSaveDisabled(),onClick:this.onSaveClicked}),p.createElement(d,{className:"ev-button-clear",text:this.props.component._clearButton,isDisabled:""===this.state._userAnswer,onClick:this.onClearClicked}))},renderSaveModal(){return p.createElement("div",{className:l("ev-linkedOpenInput-save-modal",{"ev-is-visible":this.state._showSavedModal})},p.createElement("div",{className:"ev-linkedOpenInput-save-modal-inner"},p.createElement("span",{className:"ev-save-success-message"},this.props.component._saveSuccessMessage)))},render(){const{props:e}=this;return p.createElement(c,{component:e.component,styles:e.styles,isVisibilitySensorActive:v(e),onVisibilityChange:this.onVisibilityChange},p.createElement("div",null,p.createElement("div",{className:h(e.component)},this.renderIncomplete(),this.renderOpenInputAnswers(),this.renderTextArea(),this.renderSaveModal()),this.renderButtons()))}});e.exports=b},1995:function(e,t,s){"use strict";const n=s(0),{connect:i}=s(6),r=s(1),o=s(213),a=e=>e.isLinkedOpenInputComplete?n.createElement("div",{className:"ev-linkedOpenInput-linkedUserAnswer-container"},n.createElement("div",{className:"ev-label"},e._linkedAnswerLabelText),n.createElement("div",{className:"ev-linkedOpenInput-linkedUserAnswer",style:e.style},n.createElement("div",{className:"ev-linkedOpenInput-linkedUserAnswer-inner"},e.linkedOpenInputUserAnswer))):null;a.propTypes={isLinkedOpenInputComplete:r.bool.isRequired,linkedOpenInputUserAnswer:r.string,_linkedAnswerLabelText:r.string,style:r.object},e.exports=i((e,t)=>{const s=t._linkedOpenInputId?o(t._linkedOpenInputId):{};return{isLinkedOpenInputComplete:s._isComplete||!1,linkedOpenInputUserAnswer:s._userAnswer}})(a)},1996:function(e,t,s){"use strict";const n=s(0),{connect:i}=s(6),r=s(1),o=s(212),a=s(213),p=s(215),l=e=>e.isLinkedOpenInputComplete?null:n.createElement("div",{className:"ev-linkedOpenInput-linked-incomplete-message"},n.createElement("div",{className:"ev-linkedOpenInput-linked-incomplete-message-inner ev-label"},e._linkedIncompleteMessage),n.createElement(p,{className:"ev-linkedOpenInput-navigate-linked",text:e._navigateToLinkedButtonText,onClick:()=>o(e._linkedOpenInputId)}));l.propTypes={isLinkedOpenInputComplete:r.bool.isRequired,_linkedOpenInputId:r.string,_navigateToLinkedButtonText:r.string,_linkedIncompleteMessage:r.string},e.exports=i((e,t)=>({isLinkedOpenInputComplete:(t._linkedOpenInputId?a(t._linkedOpenInputId):{})._isComplete||!1}))(l)},1997:function(e,t,s){"use strict";const n=s(220),{LINKEDOPENINPUT_SAVE_USER_ANSWER:i}=s(1555);e.exports=function(e,t){switch(t.type){case i:return{...e,_userAnswer:t.payload.userAnswer,_isSubmitted:!0,_isCorrect:!0,_correctAt:n()};default:return e}}},1998:function(e,t,s){"use strict";const n=s(34),i=s(17),r=s(145),o=s(77);e.exports=(e,t)=>{let s=t._isAlwaysEnabled;if(!s){const o=n(t._items).map(e=>e._linkedOpenInputId).compact().value(),a=r(o,e);s=void 0===i(a,e=>!0!==e._isComplete)}return{isLinkedOpenInputsComplete:s,articleStyle:o(e,t,"article")._classes}}},1999:function(e,t,s){"use strict";e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_userAnswer:{fieldKey:"_userAnswer",type:"String",shouldRestore:!0}}}}]);