(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{1285:function(e,s,t){"use strict";const{registerComponent:n}=t(4),o=t(2034),i=t(2035),{saveUserAnswer:r}=t(1562);n("openInput",{component:o,actions:{saveUserAnswer:r},reducer:i,mapStateToProps:t(2036),trackingMap:t(2037)})},1374:function(e,s,t){"use strict";const n=t(7);e.exports=function(e){return n(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},1375:function(e,s,t){"use strict";e.exports=function(e,s,t,n,o){n&&n.props&&n.props.component?(s.top&&(n.isInviewTop=!0),s.bottom&&(n.isInviewBottom=!0),n.isInviewTop&&n.isInviewBottom&&o&&o(n.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}},1376:function(e,s,t){"use strict";e.exports=(e,s="_hasBeenViewed")=>{const{component:t,isPageReady:n}=e;return!0===n&&!0===t._isReady&&!0!==t[s]}},1407:function(e,s,t){"use strict";const n=t(2),o=t(1),i=t(0),r=t(7),a=n({displayName:"TextArea",propTypes:{id:o.string,value:o.string.isRequired,label:o.string,onChange:o.func.isRequired,onFocus:o.func,onBlur:o.func,className:o.string,placeholder:o.string,minHeight:o.number,ariaLabel:o.string,isDisabled:o.bool,shouldFocus:o.bool},getDefaultProps:()=>({value:""}),componentDidUpdate(e){const{shouldFocus:s}=this.props;s&&!e.shouldFocus&&this._textArea.focus()},renderTextArea(){const{props:e}=this;return i.createElement("textarea",{id:e.id,ref:e=>this._textArea=e,"aria-label":e.ariaLabel,value:e.value,onChange:s=>e.onChange(s.target.value),onFocus:e.onFocus,onBlur:e.onBlur,placeholder:e.placeholder,className:r("ev-text-area",e.className),style:{minHeight:e.minHeight},disabled:e.isDisabled})},render(){const{props:e}=this;return e.label?i.createElement(i.Fragment,null,i.createElement("label",{className:"ev-label",htmlFor:e.id,dangerouslySetInnerHTML:{__html:e.label},style:{pointerEvents:e.isDisabled?"none":"all"}}),this.renderTextArea()):this.renderTextArea()}});e.exports=a},1562:function(e,s,t){"use strict";s.OPENINPUT_SAVE_USER_ANSWER="OPENINPUT_SAVE_USER_ANSWER",s.saveUserAnswer=e=>({type:s.OPENINPUT_SAVE_USER_ANSWER,payload:e})},2034:function(e,s,t){"use strict";const n=t(216),o=t(516),i=t(2),r=t(1),a=t(0),c=t(7),{Component:p,ComponentAssignment:l}=t(466),u=t(215),d=t(1407),m=t(472),h=t(1376),v=t(1375),_=t(1374),A=i({displayName:"OpenInput",propTypes:{course:r.object.isRequired,component:r.object.isRequired,setComponentAsReady:r.func.isRequired,setComponentAsViewed:r.func.isRequired,setComponentAsComplete:r.func.isRequired,showFeedback:r.func.isRequired,saveUserAnswer:r.func.isRequired,setAriaLive:r.func.isRequired,styles:r.any},getInitialState(){return{_userAnswer:this.props.component._userAnswer||"",_showSavedModal:!1}},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},UNSAFE_componentWillReceiveProps({component:e}){o(e._userAnswer)||e._userAnswer===this.state._userAnswer||this.setState({_userAnswer:e._userAnswer})},componentDidUpdate(e){const{component:s}=this.props;!e.component._isSubmitted&&s._isSubmitted&&(this.showSavedModal(),s._userAnswer&&this.showFeedback())},saveUserAnswer(e){const{props:s}=this;s.saveUserAnswer({componentId:s.component._id,userAnswer:e}),s.component._isSubmitted&&(this.showSavedModal(),e&&this.showFeedback())},showFeedback(){const{component:e}=this.props;if(!e._canShowFeedback)return;const s={feedbackTitle:e._shouldShowDisplayTitleInFeedback?e.displayTitle:null,feedbackMessage:e.feedbackMessage,feedbackGraphic:e.feedbackGraphic};setTimeout(()=>{this.props.showFeedback(s)},200)},showSavedModal(){this.setState({_showSavedModal:!0}),n(()=>{this.setState({_showSavedModal:!1})},1e3)},onTextAreaChange(e){this.setState({_userAnswer:e})},onSaveClicked(){const{component:e,setAriaLive:s,setComponentAsComplete:t}=this.props;this.saveUserAnswer(this.state._userAnswer),s({message:e.savedAriaLiveMessage,isAssertive:!1}),t(e._id,{_isSubmitted:!0})},onClearClicked(){this.saveUserAnswer("");const{component:e,setAriaLive:s}=this.props;s({message:e.clearedAriaLiveMessage,isAssertive:!1})},onVisibilityChange(...e){v(...e,this,this.props.setComponentAsViewed)},getTextAreaMinHeight(){return this.props.component._hasMinimumHeight?this.props.component._minimumHeight:300},renderTextArea(){var e;const{component:s}=this.props;return(null===(e=s._assignment)||void 0===e?void 0:e._isMarked)?a.createElement("div",{className:"ev-openInput-userAnswer"},a.createElement("div",{className:"ev-openInput-userAnswer-inner"},s._userAnswer)):a.createElement(d,{ariaLabel:s.textAreaAriaLabel,value:this.state._userAnswer,onChange:this.onTextAreaChange,placeholder:s.placeholder,minHeight:this.getTextAreaMinHeight()})},getIsSaveDisabled(){const{component:e}=this.props,{_userAnswer:s}=this.state;return""===s&&!e._userAnswer||s===e._userAnswer},renderButtons(){var e;if(null!==(e=this.props.component._assignment)&&void 0!==e&&e._isMarked)return;const{isActionButtonOnRight:s}=m(this.props);return a.createElement("div",{className:c("ev-buttons",{"ev-switch-buttons":s})},a.createElement(u,{className:"ev-button-save",text:this.props.component._saveButton,isDisabled:this.getIsSaveDisabled(),onClick:this.onSaveClicked}),a.createElement(u,{className:"ev-button-clear",text:this.props.component._clearButton,isDisabled:""===this.state._userAnswer,onClick:this.onClearClicked}))},renderSaveModal(){return a.createElement("div",{className:c("ev-openInput-save-modal",{"ev-is-visible":this.state._showSavedModal})},a.createElement("div",{className:"ev-openInput-save-modal-inner"},a.createElement("span",{className:"ev-save-success-message"},this.props.component._saveSuccessMessage)))},renderComponentAssignment(){var e,s;const{course:t,component:n}=this.props;if(null!==(e=t._assignment)&&void 0!==e&&e._isEnabled&&null!==(s=n._assignment)&&void 0!==s&&s._isEnabled)return a.createElement(l,{component:n,assignment:n._assignment})},render(){const{props:e}=this;return a.createElement(p,{component:e.component,styles:e.styles,isVisibilitySensorActive:h(e),onVisibilityChange:this.onVisibilityChange},a.createElement("div",null,a.createElement("div",{className:_(e.component)},this.renderTextArea(),this.renderSaveModal()),this.renderButtons(),this.renderComponentAssignment()))}});e.exports=A},2035:function(e,s,t){"use strict";const n=t(220),{OPENINPUT_SAVE_USER_ANSWER:o}=t(1562);e.exports=function(e,s){switch(s.type){case o:return{...e,_userAnswer:s.payload.userAnswer,_isCorrect:!0,_isSubmitted:!0,_correctAt:n()};default:return e}}},2036:function(e,s,t){"use strict";const n=t(77);e.exports=(e,s)=>({articleStyle:n(e,s,"article")._classes})},2037:function(e,s,t){"use strict";e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_userAnswer:{fieldKey:"_userAnswer",type:"String",shouldRestore:!0},_assignment:{fieldKey:"_assignment",type:"Object",shouldRestore:!0},_assignmentAttempts:{fieldKey:"_assignmentAttempts",type:"Object",shouldRestore:!0}}}}]);