(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1251:function(e,t,o){"use strict";const{registerComponent:r}=o(4),n=o(1790),i=o(1795),{onCardDrop:s,onCardDropReject:c,onCardDropPostReject:d,onNextCard:a}=o(1525);r("cardDrop",{component:n,actions:{onCardDrop:s,onCardDropReject:c,onCardDropPostReject:d,onNextCard:a},reducer:i,trackingMap:o(1796)})},1374:function(e,t,o){"use strict";const r=o(7);e.exports=function(e){return r(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},1375:function(e,t,o){"use strict";e.exports=function(e,t,o,r,n){r&&r.props&&r.props.component?(t.top&&(r.isInviewTop=!0),t.bottom&&(r.isInviewBottom=!0),r.isInviewTop&&r.isInviewBottom&&n&&n(r.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}},1376:function(e,t,o){"use strict";e.exports=(e,t="_hasBeenViewed")=>{const{component:o,isPageReady:r}=e;return!0===r&&!0===o._isReady&&!0!==o[t]}},1379:function(e,t,o){"use strict";const{store:r}=o(4),n=o(168);function i(e,t,o){const i=e._feedback[o],s=n(i);if(t&&!s){return r.getState().course._globals._feedbackText[o]}return s?i:null}function s(e,t){const o=e._feedbackNavigation;if(o&&o[t]&&o[t]._isEnabled&&o[t]._linkType)return{_link:o[t]}}e.exports=function(e){let t;return t=e._isCorrect?function(e){const t=e._feedback._shouldUseGlobalCorrectFeedback;return{feedbackMessage:(t?r.getState().course._globals._feedbackText.correctFeedback:"")+(e._feedback.correct?e._feedback.correct:""),feedbackGraphic:i(e,t,"_correctGraphic"),feedbackNavigation:s(e,"_correct")}}(e):e._isPartlyCorrect?function(e){const{_partlyCorrect:t}=e._feedback,o=t._shouldUseGlobalPartlyCorrectFeedback,n=r.getState().course._globals._feedbackText;if(0===e._attemptsLeft){return{feedbackMessage:(o?n.partlyCorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:i(e,o,"_partlyCorrectFinalGraphic"),feedbackNavigation:s(e,"_partlyCorrect")}}return{feedbackMessage:(o?n.partlyCorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:i(e,o,"_partlyCorrectNotFinalGraphic"),feedbackNavigation:s(e,"_partlyCorrectNotFinal")}}(e):function(e){const{_incorrect:t}=e._feedback,o=t._shouldUseGlobalIncorrectFeedback,n=r.getState().course._globals._feedbackText;if(0===e._attemptsLeft||!t.notFinal&&!o||!n.incorrectNotFinalFeedback&&o){return{feedbackMessage:(o?n.incorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:i(e,o,"_incorrectFinalGraphic"),feedbackNavigation:s(e,0===e._attemptsLeft?"_incorrect":"_incorrectNotFinal")}}return{feedbackMessage:(o?n.incorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:i(e,o,"_incorrectNotFinalGraphic"),feedbackNavigation:s(e,"_incorrectNotFinal")}}(e),!1!==e._shouldShowDisplayTitleInFeedback&&(t.feedbackTitle=e.displayTitle),t}},1525:function(e,t,o){"use strict";t.CARD_DROP_ON_DROP="CARD_DROP_ON_DROP",t.CARD_DROP_ON_DROP_REJECT="CARD_DROP_ON_DROP_REJECT",t.CARD_DROP_ON_DROP_POST_REJECT="CARD_DROP_ON_DROP_POST_REJECT",t.CARD_DROP_ON_NEXT_CARD="CARD_DROP_ON_NEXT_CARD",t.onCardDrop=e=>({type:t.CARD_DROP_ON_DROP,payload:e}),t.onCardDropReject=e=>({type:t.CARD_DROP_ON_DROP_REJECT,payload:e}),t.onCardDropPostReject=e=>({type:t.CARD_DROP_ON_DROP_POST_REJECT,payload:e}),t.onNextCard=e=>({type:t.CARD_DROP_ON_NEXT_CARD,payload:e})},1790:function(e,t,o){"use strict";const r=o(216),n=o(31),i=o(17),s=o(28),c=o(2),d=o(1),a=o(0),{Component:p}=o(466),u=o(1374),l=o(1379),_=o(1376),m=o(1375),h=o(1791),C=o(1792),b=o(1794),R=c({displayName:"CardDrop",propTypes:{component:d.object.isRequired,styles:d.object,screenSize:d.string.isRequired,submitQuestion:d.func.isRequired,actionButtonClicked:d.func.isRequired,setComponentAsReady:d.func.isRequired,setComponentAsViewed:d.func.isRequired,showFeedback:d.func.isRequired,shouldHideMarking:d.bool,onCardDrop:d.func.isRequired,onCardDropReject:d.func.isRequired,onCardDropPostReject:d.func.isRequired,onNextCard:d.func.isRequired},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},componentDidUpdate(e){const{component:t}=this.props;!e.component._isSubmitted&&t._isSubmitted&&this.showFeedback()},UNSAFE_componentWillReceiveProps(e){!this.props.component._canSubmit&&e.component._canSubmit&&this.props.submitQuestion(this.props.component._id)},getActionButtonEnabled(){const{_isSubmitted:e,_isCorrect:t,_attemptsLeft:o}=this.props.component;return e&&!t&&o>0},showFeedback(){const e=l(this.props.component);this.props.showFeedback(e)},onVisibilityChange(...e){m(...e,this,this.props.setComponentAsViewed)},onDrop(e){const{onCardDrop:t,onNextCard:o,component:n}=this.props,i=n._id;t({componentId:i,zoneId:e}),r(()=>o({componentId:i}),1e3)},onDropReject(e){const{onCardDropReject:t,onCardDropPostReject:o,component:n}=this.props,i=n._id;t({componentId:i,zoneId:e}),r(()=>o({componentId:i}),1e3)},renderCardDropItems(e){const{_id:t,_items:o,_currentItemId:r}=this.props.component;if(!r)return;let i=n(o,{_isComplete:!1,_isRejected:!1});return i=i.slice(0,5),s(i,(n,i)=>a.createElement(h,{key:n._id,id:n._id,componentId:t,isCurrentItem:r===n._id,index:i,zIndex:o.length-i,text:n.text,width:e.width,height:e.height,canFocus:n._canFocus}))},renderDropZones(e){const{_items:t,_currentItemId:o}=this.props.component,r=i(t,{_id:o});if(!r)return;const{_id:n,_dropZones:c,_shouldZonesRejectIncorrect:d,_useComponentDropZones:p,_isComplete:u,rejectedCardAriaLabel:l}=this.props.component,_=p?c:r._dropZones;return s(_,t=>a.createElement(C,{key:`${o}-${t._id}-${r._isComplete}`,id:t._id,componentId:n,isComponentComplete:u,text:t.text,ariaLabel:t.ariaLabel,rejectedCardAriaLabel:l,isComplete:r._isComplete,isRejected:r._isRejected,isCorrectZone:p?r._correctDropZoneIds.includes(t._id):t.isCorrectZone,rejectIncorrect:d,hasDroppedItem:r._droppedZoneId===t._id||r._isRejected&&r._droppedZoneId===t._id,currentItemText:r.text,width:e.width,height:e.height,onDrop:this.onDrop,onDropReject:this.onDropReject}))},renderIndicator(){const{component:e,shouldHideMarking:t}=this.props;if(e._isComplete&&!t)return a.createElement(b,{items:e._items,indicatorLabelText:e.indicatorLabelText,shouldHideScore:e._shouldHideScore})},render(){const{props:e}=this,t=e.component._cardSizes[e.screenSize],{width:o,height:r}=t;return a.createElement(p,{component:e.component,styles:e.styles,shouldHideMarking:e.shouldHideMarking,shouldHideActionButton:e.component._attempts<=1,onActionButtonClicked:e.actionButtonClicked,isVisibilitySensorActive:_(e),onVisibilityChange:this.onVisibilityChange,onFeedbackButtonClicked:this.showFeedback,getActionButtonState:()=>"reset",getActionButtonEnabled:this.getActionButtonEnabled},a.createElement("div",{className:u(e.component)},a.createElement("div",{className:"ev-card-drop-items",style:{width:o+"px",height:r+"px"}},this.renderCardDropItems(t)),a.createElement("div",{className:"ev-card-drop-zones"},this.renderDropZones(t)),this.renderIndicator()))}});e.exports=R},1791:function(e,t,o){"use strict";const r=o(2),n=o(1),i=o(0),s=o(55),c=o(477),d=o(7),a=o(56),p=o(30),u=r({displayName:"CardDropItem",propTypes:{id:n.string.isRequired,componentId:n.string.isRequired,text:n.string,isCurrentItem:n.bool.isRequired,zIndex:n.number.isRequired,index:n.number.isRequired,width:n.number.isRequired,height:n.number.isRequired,canFocus:n.bool.isRequired},getDefaultProps:()=>({width:300,height:150,canFocus:!1}),getInitialState:()=>({_isDragging:!1,_x:0,_y:0}),componentDidMount(){const{isCurrentItem:e,canFocus:t}=this.props;this._isMounted=!0,this._interact=c(s.findDOMNode(this)).draggable({onmove:this.onDragMove,onend:this.onDragEnd,enabled:e}),t&&this._button.focus({preventScroll:!0})},componentWillUnmount(){this._isMounted=!1,this._interact.unset()},componentDidUpdate({isCurrentItem:e,canFocus:t}){const{isCurrentItem:o,canFocus:r}=this.props;o&&!e&&(this._interact=this._interact.draggable(!0)),r&&!t&&this._button.focus({preventScroll:!0})},onDragMove(e){this.setState({_x:this.state._x+e.dx,_y:this.state._y+e.dy,_isDragging:!0})},onDragEnd(){this._isMounted&&this.setState({_isDragging:!1,_x:0,_y:0})},getStyle(){const{width:e,height:t,zIndex:o,index:r}=this.props,{_x:n,_y:i}=this.state;return{left:n+"px",top:i+"px",transform:`translateY(${r*(window.innerWidth<520?1:2)}%)`,position:"absolute",width:e+"px",height:t+"px",zIndex:o}},render(){const{text:e,isCurrentItem:t,id:o,componentId:r}=this.props,{_isDragging:n}=this.state;return i.createElement("button",{id:o,ref:e=>this._button=e,className:d("ev-card-drop-item ev-focusable","ev-card-drop-item-"+r,{"ev-is-current-item":t,"ev-is-dragging":n,"ev-is-disabled":!t}),style:this.getStyle(),tabIndex:t?0:-1},i.createElement(p,{tag:"span",innerTag:"span",body:e}),i.createElement(a,{className:"ev-card-drop-item-drag-icon",icon:"move"}))}});e.exports=u},1792:function(e,t,o){"use strict";const r=o(2),n=o(1),i=o(0),s=o(55),c=o(477),d=o(7),{isEnterKey:a}=o(169),p=o(30),u=o(1793),l=r({displayName:"CardDropZone",propTypes:{id:n.string.isRequired,componentId:n.string.isRequired,isComponentComplete:n.bool.isRequired,text:n.string,ariaLabel:n.string,rejectedCardAriaLabel:n.string,onDrop:n.func.isRequired,onDropReject:n.func.isRequired,currentItemText:n.string,isComplete:n.bool.isRequired,isRejected:n.bool.isRequired,isCorrectZone:n.bool.isRequired,rejectIncorrect:n.bool.isRequired,width:n.number.isRequired,height:n.number.isRequired,hasDroppedItem:n.bool.isRequired},getDefaultProps:()=>({isComponentComplete:!1,isComplete:!1,isRejected:!1,isCorrectZone:!1,rejectIncorrect:!1,width:300,height:150,hasDroppedItem:!1}),getInitialState:()=>({_isFocused:!1,_isDragOver:!1}),componentDidMount(){c(s.findDOMNode(this)).dropzone({accept:".ev-card-drop-item-"+this.props.componentId,ondrop:this.onDrop,ondragenter:this.onDragEnter,ondragleave:this.onDragLeave,overlap:.5})},componentWillUnmount(){c(s.findDOMNode(this)).unset()},onDrop(){const{id:e,onDrop:t,onDropReject:o,isCorrectZone:r,rejectIncorrect:n}=this.props;if(n&&!r)return o(e),this.onDragLeave();t(e)},onDragEnter(){this.setState({_isDragOver:!0})},onDragLeave(){this.setState({_isDragOver:!1})},onFocus(){this.setState({_isFocused:!0})},onBlur(){this.setState({_isFocused:!1})},onKeyDown(e){const{_isFocused:t}=this.state,{id:o,onDrop:r,onDropReject:n,isComplete:i,isCorrectZone:s,rejectIncorrect:c}=this.props;if(a(e))return c&&!s?n(o):void(t&&!i&&r(o))},onClick(){const{id:e,onDrop:t,onDropReject:o,isComplete:r,isCorrectZone:n,rejectIncorrect:i}=this.props;if(i&&!n)return o(e);r||t(e)},renderCardItem(){const{currentItemText:e,isComplete:t,isRejected:o,hasDroppedItem:r,width:n,height:s,rejectedCardAriaLabel:c,isComponentComplete:d}=this.props;if(!d&&(t||o)&&r)return i.createElement(u,{text:e,width:n,height:s,isRejected:o,rejectedCardAriaLabel:c})},render(){const{text:e,ariaLabel:t,width:o,height:r,isComplete:n,isRejected:s}=this.props,{_isDragOver:c}=this.state;return i.createElement("div",{className:d("ev-card-drop-zone",{"ev-is-drag-over":c,"ev-is-disabled":n,"ev-is-rejected":s}),tabIndex:n?null:0,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onClick:this.onClick,"aria-label":t,style:{width:o+"px",height:r+"px"}},i.createElement(p,{tag:"span",innerTag:"span",body:e}),this.renderCardItem())}});e.exports=l},1793:function(e,t,o){"use strict";const r=o(2),n=o(1),i=o(0),s=o(7),c=o(30),d=r({displayName:"CardDropZoneItem",propTypes:{text:n.string,rejectedCardAriaLabel:n.string,width:n.number.isRequired,height:n.number.isRequired,isRejected:n.bool.isRequired},componentDidMount(){const{isRejected:e}=this.props;e&&this._button.focus({preventScroll:!0})},render(){const{text:e,rejectedCardAriaLabel:t,width:o,height:r,isRejected:n}=this.props;return i.createElement("button",{ref:e=>this._button=e,className:s("ev-card-drop-item ev-card-drop-drop-zone-item ev-is-disabled ev-focusable",{"ev-is-rejected":n}),style:{width:o+"px",height:r+"px"},tabIndex:"-1","aria-label":n?t:null,"aria-hidden":!n},i.createElement(c,{tag:"span",innerTag:"span",body:e}))}});e.exports=d},1794:function(e,t,o){"use strict";const r=o(31),n=o(28),i=o(1),s=o(0),c=o(56),d=({items:e,indicatorLabelText:t,shouldHideScore:o})=>s.createElement("div",{className:"ev-card-drop-indicator"},s.createElement("div",{className:"ev-card-drop-indicator-items"},n(e,e=>s.createElement("div",{key:e._id,className:"ev-card-drop-indicator-item"},s.createElement(c,{icon:e._isCorrect?"check":"cross"})))),o?null:s.createElement("div",{className:"ev-label ev-card-drop-indicator-label"},(()=>{const o=r(e,{_isCorrect:!0});return`${t} ${o.length}/${e.length}`})()));d.propTypes={items:i.array.isRequired,indicatorLabelText:i.string,shouldHideScore:i.bool},d.defaultProps={indicatorLabelText:"",shouldHideScore:!1},e.exports=d},1795:function(e,t,o){"use strict";const r=o(31),n=o(17),i=o(28),{SETUP_COMPONENT:s,RESET_QUESTION:c,SUBMIT_QUESTION:d}=o(61),{CARD_DROP_ON_DROP:a,CARD_DROP_ON_DROP_REJECT:p,CARD_DROP_ON_DROP_POST_REJECT:u,CARD_DROP_ON_NEXT_CARD:l}=o(1525);function _(e){let t={};if(!e._isComplete){const o=i(e._items,e=>({...e,_isComplete:!1,_isRejected:!1,_isCorrect:!1,_canFocus:!1}));t={_currentItemId:o.length?o[0]._id:null,_items:o,_canSubmit:!1}}return{...e,...t,_shouldDisableShowAnswer:!0}}function m(e,t,o){if(o)return e._correctDropZoneIds.includes(t);return n(e._dropZones,{_id:t}).isCorrectZone}e.exports=function(e,t){switch(t.type){case s:return _(e);case d:return function(e){const{_items:t,_canSubmit:o}=e;if(!o)return e;const n=r(t,{_isCorrect:!0}).length,i=n===t.length,s=!i&&n>0;return{...e,_isCorrect:i,_isPartlyCorrect:s,_hasUserAnswered:!0}}(e);case c:return function(e){const t=_(e);return{...e,...t,_items:i(t._items,e=>t._currentItemId===e._id?{...e,_canFocus:!0}:e)}}(e);case a:return function(e,t){const{_items:o,_currentItemId:r,_useComponentDropZones:s}=e,c=i(o,e=>r===e._id?{...e,_isComplete:!0,_isCorrect:m(e,t,s),_droppedZoneId:t}:e),d=n(c,{_isComplete:!1});return d&&(d._canFocus=!0),{...e,_items:c}}(e,t.payload.zoneId);case p:return function(e,t){const{_items:o,_currentItemId:r}=e;return{...e,_items:i(o,e=>r===e._id?{...e,_isRejected:!0,_droppedZoneId:t}:e)}}(e,t.payload.zoneId);case u:return function(e){const{_items:t,_currentItemId:o}=e;return{...e,_items:i(t,e=>o===e._id?{...e,_canFocus:!0,_isRejected:!1}:e)}}(e,t.payload.zoneId);case l:return function(e){const{_items:t,_currentItemId:o}=e,i=n(t,{_isComplete:!1}),s=i?i._id:o;return{...e,_currentItemId:s,_canSubmit:r(t,{_isComplete:!0}).length===t.length}}(e);default:return e}}},1796:function(e,t,o){"use strict";e.exports={_interactionType:{type:"String",default:"question",shouldRestore:!1},_attemptsLeft:{fieldKey:"_attemptsLeft",type:"Number",shouldRestore:!0},_attemptsTaken:{fieldKey:"_attemptsTaken",type:"Number",shouldRestore:!0},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String"},_isCorrect:{fieldKey:"_isCorrect",type:"String",shouldRestore:!0},_droppedZoneId:{fieldKey:"_droppedZoneId",type:"String",shouldRestore:!0}}},_hasUserAnswered:{fieldKey:"_hasUserAnswered",type:"Boolean",shouldRestore:!0}}}}]);